<!DOCTYPE html><html lang="zh-Hans"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"><meta name="description" content="使用 Python 科学绘图"><meta name="keywords" content><meta name="author" content="Yan Zhang"><meta name="copyright" content="Yan Zhang"><title>使用 Python 科学绘图 | OpenFOAM 成长之路</title><link rel="shortcut icon" href="/album/192.jpg"><link rel="stylesheet" href="/css/index.css?version=1.9.1"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@latest/css/font-awesome.min.css?version=1.9.1"><meta name="format-detection" content="telephone=no"><meta http-equiv="x-dns-prefetch-control" content="on"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk/dist/gitalk.min.css"><script src="https://cdn.jsdelivr.net/npm/gitalk@latest/dist/gitalk.min.js"></script><script src="https://cdn.jsdelivr.net/npm/blueimp-md5@2.10.0/js/md5.min.js"></script><link rel="dns-prefetch" href="https://hm.baidu.com"><script>var _hmt=_hmt||[];!function(){var e=document.createElement("script");e.src="https://hm.baidu.com/hm.js?38997e7d3b8e8c254bf0ddb7d2452127";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}()</script><link rel="dns-prefetch" href="https://www.google-analytics.com"><script>!function(e,a,t,n,g,c,o){e.GoogleAnalyticsObject="ga",e.ga=e.ga||function(){(e.ga.q=e.ga.q||[]).push(arguments)},e.ga.l=1*new Date,c=a.createElement(t),o=a.getElementsByTagName(t)[0],c.async=1,c.src="https://www.google-analytics.com/analytics.js",o.parentNode.insertBefore(c,o)}(window,document,"script"),ga("create","UA-119919860-1","auto"),ga("send","pageview")</script><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><script>var GLOBAL_CONFIG={root:"/",algolia:void 0,localSearch:{path:"search.xml",languages:{hits_empty:"找不到您查询的内容:${query}"}},copy:{success:"复制成功",error:"复制错误",noSupport:"浏览器不支持"},hexoVersion:"6.3.0"}</script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/hexo-math@4.0.0/dist/style.css"><meta name="generator" content="Hexo 6.3.0"><link rel="alternate" href="/atom.xml" title="OpenFOAM 成长之路" type="application/atom+xml"></head><body><i class="fa fa-arrow-right" id="toggle-sidebar" aria-hidden="true"></i><div id="sidebar" data-display="true"><div class="toggle-sidebar-info text-center"><span data-toggle="切换文章详情">切换站点概览</span><hr></div><div class="sidebar-toc"><div class="sidebar-toc__title">目录</div><div class="sidebar-toc__progress"><span class="progress-notice">你已经读了</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar"></div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E8%AF%BB%E5%8F%96%E6%95%B0%E6%8D%AE"><span class="toc-number">1.</span> <span class="toc-text">读取数据</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%9B%BE%E5%9E%8B"><span class="toc-number">2.</span> <span class="toc-text">图型</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%82%B9%E7%BA%BF%E5%9B%BE-plot"><span class="toc-number">2.1.</span> <span class="toc-text">点线图 plot</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AB%96%E7%9B%B4%E7%BA%BF%E5%92%8C%E6%B0%B4%E5%B9%B3%E7%BA%BF"><span class="toc-number">2.1.1.</span> <span class="toc-text">竖直线和水平线</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%95%A3%E7%82%B9%E5%9B%BE-scatter"><span class="toc-number">2.2.</span> <span class="toc-text">散点图 scatter</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BB%98%E5%88%B6%E7%95%8C%E9%99%90%E5%88%86%E6%98%8E%E7%9A%84-colorbar"><span class="toc-number">2.2.1.</span> <span class="toc-text">绘制界限分明的 colorbar</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%91%E5%9B%BE-contourf"><span class="toc-number">2.3.</span> <span class="toc-text">云图 contourf</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%89%8B%E5%8A%A8%E6%8C%87%E5%AE%9A-levels"><span class="toc-number">2.3.1.</span> <span class="toc-text">手动指定 levels</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%B6%8A%E7%95%8C%E6%97%B6%E6%8C%87%E5%AE%9A%E9%A2%9C%E8%89%B2"><span class="toc-number">2.3.1.1.</span> <span class="toc-text">越界时指定颜色</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%B6%8A%E7%95%8C%E6%97%B6%E4%B8%BA%E7%A9%BA%E7%99%BD"><span class="toc-number">2.3.1.2.</span> <span class="toc-text">越界时为空白</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AD%89%E5%80%BC%E7%BA%BF"><span class="toc-number">2.4.</span> <span class="toc-text">等值线</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E9%85%8D%E4%BB%B6"><span class="toc-number">3.</span> <span class="toc-text">配件</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9B%BE%E7%89%87%E9%A2%9C%E8%89%B2"><span class="toc-number">3.1.</span> <span class="toc-text">图片颜色</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%87%AA%E5%B8%A6"><span class="toc-number">3.1.1.</span> <span class="toc-text">自带 调色</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#palettable"><span class="toc-number">3.1.2.</span> <span class="toc-text">palettable 调色</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#colorcet"><span class="toc-number">3.1.3.</span> <span class="toc-text">colorcet 调色</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#cmasher"><span class="toc-number">3.1.4.</span> <span class="toc-text">CMasher 调色</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8F%8D%E8%BD%AC%E9%A2%9C%E8%89%B2"><span class="toc-number">3.1.5.</span> <span class="toc-text">反转颜色</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#colorbar"><span class="toc-number">3.2.</span> <span class="toc-text">colorbar</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%98%E6%96%B9-api"><span class="toc-number">3.2.1.</span> <span class="toc-text">官方 API</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AE%80%E5%8D%95%E4%BD%BF%E7%94%A8"><span class="toc-number">3.2.2.</span> <span class="toc-text">简单使用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%8D%E7%BD%AE"><span class="toc-number">3.2.3.</span> <span class="toc-text">位置</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9D%90%E6%A0%87%E6%8E%A7%E5%88%B6%E7%9A%84%E4%BD%8D%E7%BD%AE"><span class="toc-number">3.2.4.</span> <span class="toc-text">坐标控制的位置</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#set_ticks"><span class="toc-number">3.2.5.</span> <span class="toc-text">set_ticks</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%80%8E%E4%B9%88%E6%89%8D%E8%83%BD%E5%9C%A8%E5%9D%90%E6%A0%87%E4%B8%8A%E6%98%BE%E7%A4%BA-max-min"><span class="toc-number">3.2.6.</span> <span class="toc-text">怎么才能在坐标上显示 max min？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%A7%91%E5%AD%A6%E8%AE%A1%E6%95%B0%E6%B3%95"><span class="toc-number">3.2.7.</span> <span class="toc-text">科学计数法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ticks-%E6%9C%9D%E5%90%91"><span class="toc-number">3.2.8.</span> <span class="toc-text">ticks 朝向</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B7%BB%E5%8A%A0%E5%8F%98%E9%87%8F%E5%90%8D-set_title"><span class="toc-number">3.2.9.</span> <span class="toc-text">添加变量名 set_title</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B7%BB%E5%8A%A0%E5%8F%98%E9%87%8F%E5%90%8D-set_label"><span class="toc-number">3.2.10.</span> <span class="toc-text">添加变量名 set_label</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8F%98%E9%87%8F%E5%90%8D%E6%94%B9%E5%8F%98%E4%BD%8D%E7%BD%AE"><span class="toc-number">3.2.11.</span> <span class="toc-text">变量名改变位置</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9B%BE%E4%BE%8B-legend"><span class="toc-number">3.3.</span> <span class="toc-text">图例 legend</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9D%90%E6%A0%87%E8%BD%B4"><span class="toc-number">3.4.</span> <span class="toc-text">坐标轴</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%BE%E7%BD%AE%E5%9D%90%E6%A0%87%E8%BD%B4-label"><span class="toc-number">3.4.1.</span> <span class="toc-text">设置坐标轴 label</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%B0%83%E6%95%B4%E5%9D%90%E6%A0%87%E8%BD%B4%E8%8C%83%E5%9B%B4"><span class="toc-number">3.4.2.</span> <span class="toc-text">调整坐标轴范围</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%87%AA%E5%AE%9A%E4%B9%89%E5%88%BB%E5%BA%A6"><span class="toc-number">3.4.3.</span> <span class="toc-text">自定义刻度</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%BB%E5%BA%A6%E6%9C%9D%E5%86%85"><span class="toc-number">3.4.4.</span> <span class="toc-text">刻度朝内</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%BB%E5%BA%A6%E5%B0%8F%E6%95%B0%E7%82%B9%E4%BD%8D%E6%95%B0"><span class="toc-number">3.4.5.</span> <span class="toc-text">刻度小数点位数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%9A%90%E8%97%8F%E5%9D%90%E6%A0%87"><span class="toc-number">3.4.6.</span> <span class="toc-text">隐藏坐标</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%9A%90%E8%97%8F-ticks-%E5%92%8C-label"><span class="toc-number">3.4.7.</span> <span class="toc-text">隐藏 ticks 和 label</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%9A%90%E8%97%8F%E5%AD%90%E5%88%BB%E5%BA%A6"><span class="toc-number">3.4.8.</span> <span class="toc-text">隐藏子刻度</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%A7%91%E5%AD%A6%E8%AE%A1%E6%95%B0"><span class="toc-number">3.4.9.</span> <span class="toc-text">科学计数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AF%B9%E6%95%B0%E5%9D%90%E6%A0%87"><span class="toc-number">3.4.10.</span> <span class="toc-text">对数坐标</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#x-y-%E5%9D%90%E6%A0%87%E7%AD%89%E6%AF%94%E4%BE%8B"><span class="toc-number">3.5.</span> <span class="toc-text">x y 坐标等比例</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8-latex-%E5%85%AC%E5%BC%8F"><span class="toc-number">3.6.</span> <span class="toc-text">使用 LaTeX 公式</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BB%BB%E6%84%8F%E4%BD%8D%E7%BD%AE%E6%B7%BB%E5%8A%A0%E6%96%87%E5%AD%97"><span class="toc-number">3.7.</span> <span class="toc-text">任意位置添加文字</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%A0%87%E6%B3%A8"><span class="toc-number">3.8.</span> <span class="toc-text">标注</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AD%90%E5%9B%BE-subplot"><span class="toc-number">3.9.</span> <span class="toc-text">子图 subplot</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9B%BE%E7%89%87%E6%A0%87%E9%A2%98"><span class="toc-number">3.10.</span> <span class="toc-text">图片标题</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#alpha-%E8%A1%A8%E7%A4%BA%E4%B8%8D%E9%80%8F%E6%98%8E%E5%BA%A61-%E8%A1%A8%E7%A4%BA%E5%AE%8C%E5%85%A8%E4%B8%8D%E9%80%8F%E6%98%8E"><span class="toc-number">3.11.</span> <span class="toc-text">alpha 表示不透明度，1 表示完全不透明</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E8%BE%93%E5%87%BA%E5%9B%BE%E7%89%87"><span class="toc-number">4.</span> <span class="toc-text">输出图片</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%B4%A7%E5%87%91%E5%B8%83%E5%B1%80"><span class="toc-number">4.1.</span> <span class="toc-text">紧凑布局</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#python-%E7%9B%B8%E5%85%B3"><span class="toc-number">5.</span> <span class="toc-text">python 相关</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%A9%E7%94%A8%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F%E8%8E%B7%E5%8F%96%E5%BD%93%E5%89%8D%E7%9B%AE%E5%BD%95%E4%B8%8B%E7%9A%84%E6%9F%90%E4%BA%9B%E6%96%87%E4%BB%B6"><span class="toc-number">5.1.</span> <span class="toc-text">利用正则表达式获取当前目录下的某些文件</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%8D%A2%E8%A1%8C"><span class="toc-number">5.2.</span> <span class="toc-text">换行</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%81%B0%E8%89%B2%E7%B3%BB%E5%88%97%E5%A1%AB%E5%85%85%E5%BD%A9%E5%9B%BE"><span class="toc-number">5.3.</span> <span class="toc-text">灰色系列填充彩图</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9C%A8%E5%9B%BE%E4%B8%AD%E4%BD%BF%E7%94%A8%E5%85%B6%E5%AE%83%E5%AD%97%E4%BD%93"><span class="toc-number">5.4.</span> <span class="toc-text">在图中使用其它字体</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%96%91%E9%9A%BE%E8%A7%A3%E7%AD%94"><span class="toc-number">6.</span> <span class="toc-text">疑难解答</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%BB%98%E5%9B%BE"><span class="toc-number">6.1.</span> <span class="toc-text">服务器绘图</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E8%8C%83%E4%BE%8B"><span class="toc-number">7.</span> <span class="toc-text">范例</span></a></li></ol></div></div><div class="author-info hide"><div class="author-info__avatar text-center"><img src="/album/192.jpg"></div><div class="author-info__name text-center">Yan Zhang</div><div class="author-info__description text-center">OpenFOAM 成长之路</div><div class="follow-button"><a target="_blank" rel="external nofollow noopener noreferrer" href="https://github.com/ZhangYanTJU">Follow Me</a></div><hr><div class="author-info-articles"><a class="author-info-articles__archives article-meta" href="/archives"><span class="pull-left">文章</span><span class="pull-right">43</span></a><a class="author-info-articles__tags article-meta" href="/tags"><span class="pull-left">标签</span><span class="pull-right">35</span></a><a class="author-info-articles__categories article-meta" href="/categories"><span class="pull-left">分类</span><span class="pull-right">8</span></a></div><hr><div class="author-info-links"><div class="author-info-links__title text-center">友情链接</div><a class="author-info-links__name text-center" target="_blank" rel="external nofollow noopener noreferrer" href="https://zmeng.tech/">Zmeng Blogs</a></div></div></div><div id="content-outer"><div class="plain" id="top-container"><div id="page-header"><span class="pull-left"><a id="site-name" href="/">OpenFOAM 成长之路</a></span><i class="fa fa-bars toggle-menu pull-right" aria-hidden="true"></i> <span class="pull-right menus"><a class="site-page" href="/">首页</a><a class="site-page" href="/about">关于</a><a class="site-page" href="/release">Timeline</a></span><span class="pull-right"><a class="site-page social-icon search"><i class="fa fa-search"></i> <span>搜索</span></a></span></div></div><div class="layout" id="content-inner"><article id="post"><div class="plain" id="post-title">使用 Python 科学绘图</div><div id="post-meta"><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2019-08-03</time><span class="post-meta__separator">|</span><span class="post-meta-wordcount"><span>字数总计:</span> <span class="word-count">2.9k</span><span class="post-meta__separator">|</span><span>阅读时长: 13 分钟</span></span></div><div class="article-container" id="post-content"><p>使用 matplotlib 绘图</p><span id="more"></span><h1 id="读取数据"><a class="markdownIt-Anchor" href="#读取数据"></a> 读取数据</h1><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line">data = pd.read_csv(<span class="string">&quot;fileName&quot;</span>, sep=<span class="string">&#x27;\t&#x27;</span>, skiprows=<span class="number">2</span>, names=[<span class="string">&#x27;x&#x27;</span>,<span class="string">&#x27;y&#x27;</span>,<span class="string">&#x27;z&#x27;</span>,<span class="string">&#x27;T&#x27;</span>])</span><br></pre></td></tr></table></figure><p>默认逗号为分隔符，也可以设为 <code>\t</code> 等。<br>默认自动将第一行作为 index，可以这样调用：<code>data['x']</code>。<br>也可以手动设置 index：<code>names=['x','y','z','T']</code>。<br>通过 skiprows 设置需要忽略的行：</p><ul><li>数字指定：<code>skiprows = 2</code> 表示忽略前 2 行。</li><li>列表指定：<code>skiprows = [0]</code> 表示忽略第 0 行。</li><li>列表指定：<code>skiprows = range(1, 10))</code> 表示忽略第 1 到 9 行，保留第 0 行，和第 10 行及以后的行。</li></ul><h1 id="图型"><a class="markdownIt-Anchor" href="#图型"></a> 图型</h1><h2 id="点线图-plot"><a class="markdownIt-Anchor" href="#点线图-plot"></a> 点线图 plot</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">plot(Z, Y, color=<span class="string">&#x27;green&#x27;</span>, linestyle=<span class="string">&#x27;dashed&#x27;</span>, linewidth=<span class="number">2</span>, marker=<span class="string">&#x27;o&#x27;</span>, markersize=<span class="number">12</span>)</span><br></pre></td></tr></table></figure><p>官方链接：<br><a target="_blank" rel="external nofollow noopener noreferrer" href="https://matplotlib.org/gallery/color/named_colors.html#sphx-glr-gallery-color-named-colors-py">colors</a><br><a target="_blank" rel="external nofollow noopener noreferrer" href="https://matplotlib.org/api/markers_api.html?highlight=marker#module-matplotlib.markers">markers</a><br><a target="_blank" rel="external nofollow noopener noreferrer" href="https://matplotlib.org/gallery/lines_bars_and_markers/linestyles.html?highlight=linestyle">Linestyles</a><br><a target="_blank" rel="external nofollow noopener noreferrer" href="https://matplotlib.org/gallery/color/colormap_reference.html#sphx-glr-gallery-color-colormap-reference-py">colormaps</a></p><p>Base Colors<br><img src="https://matplotlib.org/_images/sphx_glr_named_colors_001.png" alt></p><p>常见 linestyle<br><img src="https://matplotlib.org/_images/sphx_glr_linestyles_001.png" alt></p><p>unfilled markers<br><img src="https://matplotlib.org/_images/sphx_glr_marker_reference_001.png" alt="unfilled-markers"><br>filled markers<br><img src="https://matplotlib.org/_images/sphx_glr_marker_reference_002.png" alt><br>空心 markers</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">plt.plot(X, Y, &#x27;o&#x27;, markerfacecolor=&#x27;none&#x27;)</span><br></pre></td></tr></table></figure><p>可以将 <code>plot</code> 中的线宽设为 0，这样只剩下 symbol：</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">plot(X, Y, marker=<span class="string">&#x27;.&#x27;</span>, linewidth=<span class="number">0</span>)</span><br></pre></td></tr></table></figure><h3 id="竖直线和水平线"><a class="markdownIt-Anchor" href="#竖直线和水平线"></a> 竖直线和水平线</h3><p><a target="_blank" rel="external nofollow noopener noreferrer" href="https://matplotlib.org/3.1.0/api/_as_gen/matplotlib.axes.Axes.axhline.html">水平线</a></p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">ax.axhline(y=<span class="number">0</span>, xmin=<span class="number">0</span>, xmax=<span class="number">1</span>, color=<span class="string">&#x27;black&#x27;</span>, linewidth=<span class="number">2</span>)</span><br><span class="line">ax.axhline(<span class="number">0</span>, color=<span class="string">&#x27;black&#x27;</span>, linewidth=<span class="number">2</span>) <span class="comment"># y=0</span></span><br><span class="line"></span><br><span class="line">plt.axhline(<span class="number">0</span>, color=<span class="string">&#x27;black&#x27;</span>, linewidth=<span class="number">2</span>)</span><br></pre></td></tr></table></figure><p><a target="_blank" rel="external nofollow noopener noreferrer" href="https://matplotlib.org/3.1.1/api/_as_gen/matplotlib.axes.Axes.axvline.html">竖直线</a></p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">ax.axvline(x=<span class="number">0</span>, ymin=<span class="number">0</span>, ymax=<span class="number">1</span>, color=<span class="string">&quot;r&quot;</span>)</span><br><span class="line">ax.axvline(<span class="number">0</span>, color=<span class="string">&quot;r&quot;</span>) <span class="comment"># x=0</span></span><br><span class="line"></span><br><span class="line">plt.axvline(<span class="number">0</span>, color=<span class="string">&quot;r&quot;</span>)</span><br></pre></td></tr></table></figure><h2 id="散点图-scatter"><a class="markdownIt-Anchor" href="#散点图-scatter"></a> 散点图 scatter</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">plt.scatter(X, Y, c=Z, s=<span class="number">1</span>, marker=<span class="string">&#x27;s&#x27;</span>, cmap=plt.cm.hot)</span><br></pre></td></tr></table></figure><p>散点用 X Y 表示，用 Z 着色，色带是 plt.cm.hot，size 是 1。<br><a target="_blank" rel="external nofollow noopener noreferrer" href="https://blog.csdn.net/u013634684/article/details/49646311">更多设置参考网址</a></p><p>如果要对散点着色的话，建议先将所有点按照 Z 排序：</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">idx = Z.argsort()</span><br><span class="line">X, Y, Z = X[idx], Y[idx], Z[idx]</span><br></pre></td></tr></table></figure><h3 id="绘制界限分明的-colorbar"><a class="markdownIt-Anchor" href="#绘制界限分明的-colorbar"></a> 绘制界限分明的 colorbar</h3><p><a target="_blank" rel="external nofollow noopener noreferrer" href="https://matplotlib.org/3.2.0/api/_as_gen/matplotlib.colors.TwoSlopeNorm.html?highlight=twoslopenorm#matplotlib.colors.TwoSlopeNorm">官方链接</a></p><p>记得选用 diverging 色条，比如官方的 <a target="_blank" rel="external nofollow noopener noreferrer" href="https://matplotlib.org/examples/color/colormaps_reference.html">seismic</a>。</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">divnorm = colors.TwoSlopeNorm(vcenter=0)</span><br><span class="line">plt.scatter(X, Y, c=Z, norm=divnorm,cmap=matplotlib.cm.seismic)</span><br></pre></td></tr></table></figure><h2 id="云图-contourf"><a class="markdownIt-Anchor" href="#云图-contourf"></a> 云图 contourf</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">data = pd.read_csv(<span class="string">&quot;fileName&quot;</span>, sep=<span class="string">&#x27;\t&#x27;</span>)</span><br><span class="line">X = data[<span class="string">&#x27;X&#x27;</span>]</span><br><span class="line">Y = data[<span class="string">&#x27;Y&#x27;</span>]</span><br><span class="line">Z = data[<span class="string">&#x27;Z&#x27;</span>]</span><br><span class="line"></span><br><span class="line">xi=np.linspace(<span class="built_in">min</span>(X),<span class="built_in">max</span>(X),<span class="number">1000</span>)</span><br><span class="line">yi=np.linspace(<span class="built_in">min</span>(Y),<span class="built_in">max</span>(Y),<span class="number">1000</span>)</span><br><span class="line">[XX,YY]=np.meshgrid(xi,yi)</span><br><span class="line">ZZ=griddata((X,Y), Z, (XX,YY), method=<span class="string">&#x27;cubic&#x27;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">plt.contourf(XX, YY, ZZ, <span class="number">20</span>, cmap=plt.cm.hot) <span class="comment"># 20 表示 20 个 levels</span></span><br><span class="line">cbar = plt.colorbar()</span><br></pre></td></tr></table></figure><p>还有一种更简便的方法：</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">plt.tricontourf(X, Y, Z, <span class="number">20</span>, cmap=plt.cm.hot, extend=<span class="string">&#x27;both&#x27;</span>)</span><br></pre></td></tr></table></figure><h3 id="手动指定-levels"><a class="markdownIt-Anchor" href="#手动指定-levels"></a> 手动指定 levels</h3><h4 id="越界时指定颜色"><a class="markdownIt-Anchor" href="#越界时指定颜色"></a> 越界时指定颜色</h4><p><code>extend : &#123;'neither', 'both', 'min', 'max'&#125;</code>，默认值是 neither</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">levels=np.arange(-<span class="number">10</span>,<span class="number">4200000</span>,<span class="number">1000</span>)</span><br><span class="line">cp=plt.contourf(XX, YY, ZZ, levels=levels, cmap=plt.cm.hot, extend=<span class="string">&#x27;both&#x27;</span>)</span><br><span class="line">cp.cmap.set_under(<span class="string">&#x27;yellow&#x27;</span>) <span class="comment"># 注意顺序，此行须在 plt.colorbar 之前。如果不用这句话，那么越界区域的颜色应该就直接是 min 的颜色。</span></span><br><span class="line">cp.cmap.set_over(<span class="string">&#x27;cyan&#x27;</span>) <span class="comment"># 注意顺序，此行须在 plt.colorbar 之前. 如果不用这句话，那么越界区域的颜色应该就直接是 max 的颜色。</span></span><br><span class="line">cbar = plt.colorbar(cp)</span><br><span class="line">cbar.ax.set_title(<span class="string">&#x27;T&#x27;</span>)</span><br></pre></td></tr></table></figure><h4 id="越界时为空白"><a class="markdownIt-Anchor" href="#越界时为空白"></a> 越界时为空白</h4><p>举例：小于某个数时颜色全部为空白（假设原始数据的大小是 0~0.75）<br>那么图片里边，小于 0.0015 的区域，都将是空白</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">levels=np.arange(<span class="number">0.0015</span>,<span class="number">0.7515</span>,<span class="number">0.0015</span>)</span><br><span class="line">plt.contourf(XX, YY, ZZ,levels=levels)</span><br></pre></td></tr></table></figure><p>设置图中的数值上下限：</p><p>设置 colorbar 中的上下限：</p><p>log：<br><a target="_blank" rel="external nofollow noopener noreferrer" href="https://matplotlib.org/3.1.1/gallery/images_contours_and_fields/contourf_log.html">https://matplotlib.org/3.1.1/gallery/images_contours_and_fields/contourf_log.html</a></p><h2 id="等值线"><a class="markdownIt-Anchor" href="#等值线"></a> 等值线</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">plt.contourf(XX, YY, ZZ, <span class="number">20</span>, cmap=plt.cm.hot) <span class="comment">#这是云图，20 表示分为 20 道等值线</span></span><br><span class="line">plt.contour(XX, YY, ZZ, <span class="number">1</span>, levels=[<span class="number">1000</span>], linewidths=<span class="number">2</span>, colors=<span class="string">&#x27;y&#x27;</span>) <span class="comment">#这是等值线，1 表示一条等值线，levels 里边是这个值</span></span><br></pre></td></tr></table></figure><h1 id="配件"><a class="markdownIt-Anchor" href="#配件"></a> 配件</h1><h2 id="图片颜色"><a class="markdownIt-Anchor" href="#图片颜色"></a> 图片颜色</h2><h3 id="自带"><a class="markdownIt-Anchor" href="#自带"></a> <a target="_blank" rel="external nofollow noopener noreferrer" href="https://matplotlib.org/examples/color/colormaps_reference.html">自带</a> 调色</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">colorMap = plt.cm.get_cmap(<span class="string">&#x27;winter&#x27;</span>)</span><br><span class="line">colorMap=plt.get_cmap(<span class="string">&quot;YlOrRd&quot;</span>)</span><br><span class="line">colorMap=pyplot.cm.jet</span><br></pre></td></tr></table></figure><h3 id="palettable"><a class="markdownIt-Anchor" href="#palettable"></a> <a target="_blank" rel="external nofollow noopener noreferrer" href="https://jiffyclub.github.io/palettable">palettable</a> 调色</h3><p>源码：<a target="_blank" rel="external nofollow noopener noreferrer" href="https://github.com/jiffyclub/palettable">https://github.com/jiffyclub/palettable</a></p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> palettable.mycarta <span class="keyword">import</span> Cube1_20</span><br><span class="line"><span class="keyword">from</span> palettable.colorbrewer.sequential <span class="keyword">import</span> Greys_9</span><br><span class="line">colorMap=Cube1_20.mpl_colormap</span><br><span class="line">colorMap=Greys_9.mpl_colormap</span><br></pre></td></tr></table></figure><h3 id="colorcet"><a class="markdownIt-Anchor" href="#colorcet"></a> <a target="_blank" rel="external nofollow noopener noreferrer" href="http://colorcet.pyviz.org">colorcet</a> 调色</h3><p>源码：<a target="_blank" rel="external nofollow noopener noreferrer" href="https://github.com/pyviz/colorcet">https://github.com/pyviz/colorcet</a></p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> colorcet <span class="keyword">as</span> cc</span><br><span class="line">colorMap=cc.cm[<span class="string">&quot;blues&quot;</span>]</span><br><span class="line">colorMap=cc.cm[<span class="string">&quot;fire&quot;</span>]</span><br></pre></td></tr></table></figure><h3 id="cmasher"><a class="markdownIt-Anchor" href="#cmasher"></a> <a target="_blank" rel="external nofollow noopener noreferrer" href="https://github.com/1313e/CMasher">CMasher</a> 调色</h3><h3 id="反转颜色"><a class="markdownIt-Anchor" href="#反转颜色"></a> 反转颜色</h3><p>自带的反转就是在后边加一个 <code>_r</code>，比如：<code>colorMap=plt.cm.hot_r</code>。</p><p>反转非自带的颜色：</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">reverse_colourmap</span>(<span class="params">cmap, name = <span class="string">&#x27;my_cmap_r&#x27;</span></span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    In:</span></span><br><span class="line"><span class="string">    cmap, name</span></span><br><span class="line"><span class="string">    Out:</span></span><br><span class="line"><span class="string">    my_cmap_r</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    Explanation:</span></span><br><span class="line"><span class="string">    t[0] goes from 0 to 1</span></span><br><span class="line"><span class="string">    row i:   x  y0  y1 -&gt; t[0] t[1] t[2]</span></span><br><span class="line"><span class="string">                   /</span></span><br><span class="line"><span class="string">                  /</span></span><br><span class="line"><span class="string">    row i+1: x  y0  y1 -&gt; t[n] t[1] t[2]</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    so the inverse should do the same:</span></span><br><span class="line"><span class="string">    row i+1: x  y1  y0 -&gt; 1-t[0] t[2] t[1]</span></span><br><span class="line"><span class="string">                   /</span></span><br><span class="line"><span class="string">                  /</span></span><br><span class="line"><span class="string">    row i:   x  y1  y0 -&gt; 1-t[n] t[2] t[1]</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    reverse = []</span><br><span class="line">    k = []</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> key <span class="keyword">in</span> cmap._segmentdata:</span><br><span class="line">        k.append(key)</span><br><span class="line">        channel = cmap._segmentdata[key]</span><br><span class="line">        data = []</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> t <span class="keyword">in</span> channel:</span><br><span class="line">            data.append((<span class="number">1</span>-t[<span class="number">0</span>],t[<span class="number">2</span>],t[<span class="number">1</span>]))</span><br><span class="line">        reverse.append(<span class="built_in">sorted</span>(data))</span><br><span class="line"></span><br><span class="line">    LinearL = <span class="built_in">dict</span>(<span class="built_in">zip</span>(k,reverse))</span><br><span class="line">    my_cmap_r = mpl.colors.LinearSegmentedColormap(name, LinearL)</span><br><span class="line">    <span class="keyword">return</span> my_cmap_r</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">cmap=cc.cm[<span class="string">&quot;fire&quot;</span>]</span><br><span class="line">cmap_r = reverse_colourmap(cmap)</span><br></pre></td></tr></table></figure><h2 id="colorbar"><a class="markdownIt-Anchor" href="#colorbar"></a> colorbar</h2><h3 id="官方-api"><a class="markdownIt-Anchor" href="#官方-api"></a> 官方 API</h3><p><a target="_blank" rel="external nofollow noopener noreferrer" href="https://matplotlib.org/api/colorbar_api.html">API</a><br><a target="_blank" rel="external nofollow noopener noreferrer" href="https://matplotlib.org/api/_as_gen/matplotlib.pyplot.colorbar.html">API2</a></p><h3 id="简单使用"><a class="markdownIt-Anchor" href="#简单使用"></a> 简单使用</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">sc = plt.scatter(X, Y, c=Z, s=<span class="number">1</span>, cmap=pyplot.cm.jet)</span><br><span class="line">plt.colorbar(sc)</span><br></pre></td></tr></table></figure><h3 id="位置"><a class="markdownIt-Anchor" href="#位置"></a> 位置</h3><p>偏移使用 pad，尺寸缩小使用 shrink</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">plt.colorbar(sc, pad = <span class="number">0.07</span>, shrink=<span class="number">0.8</span>)</span><br></pre></td></tr></table></figure><h3 id="坐标控制的位置"><a class="markdownIt-Anchor" href="#坐标控制的位置"></a> 坐标控制的位置</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">cbar_ax = fig.add_axes([<span class="number">0.19</span>, <span class="number">0.06</span>, <span class="number">0.7</span>, <span class="number">0.015</span>]) <span class="comment">#left,bottom,left_length,bottom_length</span></span><br><span class="line">cbar=plt.colorbar(sc, cax=cbar_ax, orientation=<span class="string">&#x27;horizontal&#x27;</span>)</span><br></pre></td></tr></table></figure><h3 id="set_ticks"><a class="markdownIt-Anchor" href="#set_ticks"></a> set_ticks</h3><p>手动设置坐标</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">cbar_ticks = np.linspace(<span class="number">0.</span>, <span class="number">5e-3</span>, num=<span class="number">3</span>, endpoint=<span class="literal">True</span>)</span><br><span class="line">cbar.set_ticks(cbar_ticks)</span><br></pre></td></tr></table></figure><h3 id="怎么才能在坐标上显示-max-min"><a class="markdownIt-Anchor" href="#怎么才能在坐标上显示-max-min"></a> 怎么才能在坐标上显示 max min？</h3><h3 id="科学计数法"><a class="markdownIt-Anchor" href="#科学计数法"></a> 科学计数法</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">cbar.formatter.set_powerlimits((-<span class="number">1</span>, <span class="number">1</span>))</span><br><span class="line">cbar.update_ticks()</span><br></pre></td></tr></table></figure><p>这样小于 10^(-1)，或者大于 10^(1) 的值就会用科学计数法。</p><h3 id="ticks-朝向"><a class="markdownIt-Anchor" href="#ticks-朝向"></a> ticks 朝向</h3><p>如果 colorbar 竖直，ticks 默认是朝右的，如果 colorbar 水平，ticks 默认朝下的。</p><p>可以这样更改：</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">cbar.ax.xaxis.set_ticks_position(<span class="string">&#x27;top&#x27;</span>)<span class="comment">#colorbar 水平，horizontal</span></span><br><span class="line">cbar.ax.yaxis.set_ticks_position(<span class="string">&#x27;left&#x27;</span>)<span class="comment">#colorbar 竖直，vertical</span></span><br></pre></td></tr></table></figure><p>也可以这样：</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">cbar.ax.yaxis.tick_left()</span><br></pre></td></tr></table></figure><h3 id="添加变量名-set_title"><a class="markdownIt-Anchor" href="#添加变量名-set_title"></a> 添加变量名 set_title</h3><p><a target="_blank" rel="external nofollow noopener noreferrer" href="https://matplotlib.org/api/_as_gen/matplotlib.axes.Axes.set_title.html">set_title</a><br><code>set_title</code> 默认在最上方，不管 colorbar 是水平还是竖直。<br>有个参数 pad 表示向上偏移距离，但是 pad 等于负数时无效。</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">cbar.ax.set_title(<span class="string">&#x27;$\Omega\ [-]$&#x27;</span>, pad=<span class="number">10</span>)</span><br></pre></td></tr></table></figure><h3 id="添加变量名-set_label"><a class="markdownIt-Anchor" href="#添加变量名-set_label"></a> 添加变量名 set_label</h3><p>推荐使用 <a target="_blank" rel="external nofollow noopener noreferrer" href="https://stackoverflow.com/questions/17475619/how-do-i-adjust-offset-colorbar-title-in-matplotlib">set_label</a></p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">cbar.set_label(<span class="string">&#x27;$\Omega\ [-]$&#x27;</span>)</span><br><span class="line">cbar.set_label(<span class="string">r&quot;$\Delta$&quot;</span>+varName, va=<span class="string">&#x27;bottom&#x27;</span>, ha=<span class="string">&#x27;right&#x27;</span>, labelpad=<span class="number">10</span>)</span><br></pre></td></tr></table></figure><h3 id="变量名改变位置"><a class="markdownIt-Anchor" href="#变量名改变位置"></a> 变量名改变位置</h3><p>colorbar 是水平的，这里的 bottom 表示变量名放在水平 colorbar 的下边，labelpad 是向下的偏移距离。</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">cbar.set_label(<span class="string">&#x27;T&#x27;</span>,verticalalignment=<span class="string">&#x27;bottom&#x27;</span>, labelpad=-<span class="number">10</span>)</span><br></pre></td></tr></table></figure><p>Vertical alignment must be one of (‘top’, ‘bottom’, ‘center’, ‘baseline’)<br>Horizontal alignment must be one of (‘center’, ‘right’, ‘left’)</p><p>对于水平 colorbar，<code>horizontalalignment</code> 不管用？</p><h2 id="图例-legend"><a class="markdownIt-Anchor" href="#图例-legend"></a> 图例 legend</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">plt.plot(X, Y, label=<span class="string">&quot;sim&quot;</span>) <span class="comment"># 这里的 label 即图例</span></span><br><span class="line">plt.legend(loc=<span class="string">&#x27;upper left&#x27;</span>) <span class="comment"># 图例位置</span></span><br><span class="line">plt.legend(loc=<span class="string">&#x27;best&#x27;</span>) <span class="comment"># 自动选择最合适的位置</span></span><br><span class="line">plt.plot(legend=<span class="literal">None</span>)</span><br></pre></td></tr></table></figure><p>上下左右中：<code>upper lower left right</code><br>还有一个中，可以是上下的中，也可以是左右的中：<code>center</code><br>有这些组合：</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">best</span><br><span class="line">upper right</span><br><span class="line">upper left</span><br><span class="line">lower left</span><br><span class="line">lower right</span><br><span class="line">right</span><br><span class="line">center left</span><br><span class="line">center right</span><br><span class="line">lower center</span><br><span class="line">upper center</span><br><span class="line">center</span><br></pre></td></tr></table></figure><p>在循环里边画很多条线时，只想保留一个 legend，循环结束后：</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">from collections import OrderedDict</span><br><span class="line">handles, labels = plt.gca().get_legend_handles_labels()</span><br><span class="line">by_label = OrderedDict(zip(labels, handles))</span><br><span class="line">plt.legend(by_label.values(), by_label.keys())</span><br></pre></td></tr></table></figure><p>缩放图例中的 marker 大小: markerscale<br>Default is None, which will take the value from rcParams[“legend.markerscale”] = 1.0.</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">plt.legend(loc=&#x27;upper right&#x27;,markerscale=3,fancybox=True, framealpha=0.1)</span><br></pre></td></tr></table></figure><p>缩放图例中的线宽</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">leg = ax.legend()</span><br><span class="line"></span><br><span class="line">for line in leg.get_lines():</span><br><span class="line">    line.set_linewidth(4.0)</span><br></pre></td></tr></table></figure><p>关于位置的高级用法：</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">ax1.legend(loc=<span class="string">&#x27;upper right&#x27;</span>, bbox_to_anchor=(<span class="number">1.05</span>, <span class="number">4.3</span>), ncol=<span class="number">3</span>, fontsize=<span class="number">10</span>)</span><br></pre></td></tr></table></figure><p><code>bbox_to_anchor</code> 表示 right 和 upper 的位置。<br>upper right 和 loc 里的一致，不过顺序颠倒了，这里表示图例的 right 位于主图的 1.05，图例的 upper 位于主图的 4.3。<br>这个位置是 0-1，超过 1 表示坐标轴以外。<br><code>ncol=3</code> 表示三栏</p><p>保存为图片后，如果图例超出了整个图片的范围，则可以这样操作：</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">lgd =plt.legend(loc=<span class="string">&#x27;center left&#x27;</span>, bbox_to_anchor=(<span class="number">1</span>, <span class="number">0.5</span>))</span><br><span class="line">plt.savefig(<span class="string">&quot;fig.png&quot;</span>, bbox_extra_artists=(lgd,), bbox_inches=<span class="string">&#x27;tight&#x27;</span>)</span><br></pre></td></tr></table></figure><p>如果图例分了多列，<code>columnspacing=2.0</code> 控制列之间的间隔。<br><code>handletextpad=0.8</code> 可以控制 marker 和 label 之间的间隔。<br><a target="_blank" rel="external nofollow noopener noreferrer" href="https://stackoverflow.com/questions/4700614/how-to-put-the-legend-out-of-the-plot">参考资料</a><br><img src="https://i.stack.imgur.com/OIMyM.png" alt="参考图片"></p><h2 id="坐标轴"><a class="markdownIt-Anchor" href="#坐标轴"></a> 坐标轴</h2><h3 id="设置坐标轴-label"><a class="markdownIt-Anchor" href="#设置坐标轴-label"></a> 设置坐标轴 label</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">plt.xlabel(<span class="string">&#x27;r [mm]&#x27;</span>,fontsize=<span class="number">12</span>)</span><br><span class="line">ax.set_xlabel(<span class="string">&#x27;r [mm]&#x27;</span>,fontsize=<span class="number">12</span>)</span><br></pre></td></tr></table></figure><h3 id="调整坐标轴范围"><a class="markdownIt-Anchor" href="#调整坐标轴范围"></a> 调整坐标轴范围</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">plt.axis([<span class="number">0</span>, <span class="number">4</span>, <span class="number">0</span>, <span class="number">4</span>])   <span class="comment"># 改变取值范围，[xmin, xmax, ymin, ymax]</span></span><br><span class="line">plt.axis(xmin =<span class="number">0</span>, xmax = <span class="number">0.5</span>, ymin = <span class="number">0</span>, ymax = <span class="number">0.55</span>)</span><br><span class="line">plt.xlim(<span class="number">0</span>,<span class="number">0.35</span>)</span><br><span class="line">plt.ylim(<span class="number">0</span>,<span class="number">0.2</span>)</span><br></pre></td></tr></table></figure><h3 id="自定义刻度"><a class="markdownIt-Anchor" href="#自定义刻度"></a> 自定义刻度</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">x_new=np.array([<span class="number">5</span>,<span class="number">10</span>,<span class="number">15</span>,<span class="number">20</span>])</span><br><span class="line">plt.xticks(x_new)</span><br></pre></td></tr></table></figure><h3 id="刻度朝内"><a class="markdownIt-Anchor" href="#刻度朝内"></a> 刻度朝内</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">plt.tick_params(direction=<span class="string">&#x27;in&#x27;</span>)</span><br></pre></td></tr></table></figure><h3 id="刻度小数点位数"><a class="markdownIt-Anchor" href="#刻度小数点位数"></a> 刻度小数点位数</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> matplotlib.ticker <span class="keyword">as</span> ticker</span><br><span class="line">plt.gca().xaxis.set_major_formatter(ticker.FormatStrFormatter(<span class="string">&#x27;%.6f&#x27;</span>))</span><br></pre></td></tr></table></figure><h3 id="隐藏坐标"><a class="markdownIt-Anchor" href="#隐藏坐标"></a> 隐藏坐标</h3><p>在包含几个子图的图标中，可能需要隐藏一些重复的坐标</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">ax1 = plt.subplot(<span class="number">420</span>+i)</span><br><span class="line">plt.setp(ax1.get_xticklabels(), visible=<span class="literal">False</span>)</span><br><span class="line">plt.setp(ax1.get_yticklabels(), visible=<span class="literal">False</span>)</span><br></pre></td></tr></table></figure><h3 id="隐藏-ticks-和-label"><a class="markdownIt-Anchor" href="#隐藏-ticks-和-label"></a> 隐藏 ticks 和 label</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">ax1.set_xticks([])</span><br></pre></td></tr></table></figure><h3 id="隐藏子刻度"><a class="markdownIt-Anchor" href="#隐藏子刻度"></a> 隐藏子刻度</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">plt.minorticks_off()</span><br></pre></td></tr></table></figure><h3 id="科学计数"><a class="markdownIt-Anchor" href="#科学计数"></a> 科学计数</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">plt.ticklabel_format(axis=<span class="string">&quot;x&quot;</span>, style=<span class="string">&quot;sci&quot;</span>, scilimits=(<span class="number">0</span>,<span class="number">0</span>))</span><br><span class="line"></span><br><span class="line">ax.ticklabel_format(axis=<span class="string">&quot;x&quot;</span>, style=<span class="string">&quot;sci&quot;</span>, scilimits=(<span class="number">0</span>,<span class="number">0</span>))</span><br></pre></td></tr></table></figure><h3 id="对数坐标"><a class="markdownIt-Anchor" href="#对数坐标"></a> 对数坐标</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">plt.xscale(&#x27;log&#x27;)</span><br><span class="line"></span><br><span class="line">ax.set_xscale(&#x27;log&#x27;)</span><br></pre></td></tr></table></figure><p>可选项 : {“linear”, “log”, “symlog”, “logit”, …}</p><h2 id="x-y-坐标等比例"><a class="markdownIt-Anchor" href="#x-y-坐标等比例"></a> x y 坐标等比例</h2><p>这个用于 CFD 模拟场的云图，保证 x y 长度是等比例的。</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">ax=plt.gca()</span><br><span class="line">ax.set_aspect(<span class="number">1.0</span>) <span class="comment"># set uniform length of axis</span></span><br></pre></td></tr></table></figure><h2 id="使用-latex-公式"><a class="markdownIt-Anchor" href="#使用-latex-公式"></a> 使用 LaTeX 公式</h2><p>用 <code>$</code> 包围起来并在前边加上 <code>r</code> 即可，最好 <code>$</code> 和公式之间留一个空格。</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">plt.xlabel(<span class="string">r&#x27;Scalar dissipation rate $ [s^&#123;-1&#125;] $&#x27;</span>)</span><br></pre></td></tr></table></figure><h2 id="任意位置添加文字"><a class="markdownIt-Anchor" href="#任意位置添加文字"></a> 任意位置添加文字</h2><p><a target="_blank" rel="external nofollow noopener noreferrer" href="https://matplotlib.org/stable/api/text_api.html?highlight=text#module-matplotlib.text">text</a></p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">plt.text(x, y, <span class="string">&quot;text&quot;</span>)</span><br></pre></td></tr></table></figure><h2 id="标注"><a class="markdownIt-Anchor" href="#标注"></a> 标注</h2><p>可以附带箭头<br><a target="_blank" rel="external nofollow noopener noreferrer" href="https://matplotlib.org/stable/api/_as_gen/matplotlib.pyplot.annotate.html">annotate</a><br>示例：<br><img src="https://matplotlib.org/stable/_images/sphx_glr_annotation_basic_001.png" alt></p><h2 id="子图-subplot"><a class="markdownIt-Anchor" href="#子图-subplot"></a> 子图 subplot</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">plt.subplots_adjust(left=<span class="number">0.11</span>,bottom=<span class="number">0.1</span>,top=<span class="number">0.97</span>,right=<span class="number">0.9</span>,hspace=<span class="number">0.000001</span>,wspace=<span class="number">0.000001</span>)</span><br><span class="line"></span><br><span class="line">i=<span class="number">0</span></span><br><span class="line"><span class="keyword">for</span> Z <span class="keyword">in</span> [<span class="string">&#x27;2&#x27;</span>,<span class="string">&#x27;10&#x27;</span>,<span class="string">&#x27;30&#x27;</span>,<span class="string">&#x27;50&#x27;</span>]:</span><br><span class="line">    i=i+<span class="number">1</span></span><br><span class="line">    ax = plt.subplot(<span class="number">410</span>+i)</span><br><span class="line">    ax.plot(R_Mean,U_Mean,linestyle=<span class="string">&#x27;--&#x27;</span>,marker=<span class="string">&#x27;o&#x27;</span>, color=<span class="string">&#x27;r&#x27;</span>,label=<span class="string">&quot;sim&quot;</span>)</span><br></pre></td></tr></table></figure><p><code>subplot(410+i)</code> 表示子图 4x1 排列，即 4 行 1 列。此处的循环，令 <code>i</code> 分分别等于 1 2 3 4。</p><p>也可以用 <code>subplot(4,1,i)</code> 表示。</p><p>绘制着色的多个子图（云图或者上色 = 的散点图）需要注意他们的数据 min max 可能不同。<br>可以设置 vmin vmax 是他们保持一致：</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">plt.scatter(x1, y1, c=z1, s=2, marker=&#x27;o&#x27;, vmin=minZ, vmax=maxZ)</span><br><span class="line">plt.scatter(x2, y2, c=z2, s=2, marker=&#x27;s&#x27;, vmin=minZ, vmax=maxZ)</span><br></pre></td></tr></table></figure><h2 id="图片标题"><a class="markdownIt-Anchor" href="#图片标题"></a> 图片标题</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">plt.title(<span class="string">&#x27;source_Yc&#x27;</span>,fontsize=<span class="number">12</span>)</span><br></pre></td></tr></table></figure><h2 id="alpha-表示不透明度1-表示完全不透明"><a class="markdownIt-Anchor" href="#alpha-表示不透明度1-表示完全不透明"></a> alpha 表示不透明度，1 表示完全不透明</h2><p>可以用于 plot scatter contour contourf 中。</p><h1 id="输出图片"><a class="markdownIt-Anchor" href="#输出图片"></a> 输出图片</h1><h2 id="紧凑布局"><a class="markdownIt-Anchor" href="#紧凑布局"></a> 紧凑布局</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">plt.savefig(<span class="string">&quot;abc.png&quot;</span>, dpi=<span class="number">500</span>, bbox_inches=<span class="string">&#x27;tight&#x27;</span>, pad_inches=<span class="number">0.01</span>)</span><br><span class="line">plt.savefig(<span class="string">&quot;abc.pdf&quot;</span>, bbox_inches=<span class="string">&#x27;tight&#x27;</span>, pad_inches=<span class="number">0.01</span>)</span><br><span class="line">plt.close()</span><br><span class="line"></span><br><span class="line">fig = plt.figure()</span><br><span class="line">fig.savefig(<span class="string">&quot;abc.png&quot;</span>, dpi=<span class="number">500</span>, bbox_inches=<span class="string">&#x27;tight&#x27;</span>, pad_inches=<span class="number">0.01</span>)</span><br><span class="line">fig.savefig(<span class="string">&quot;abc.pdf&quot;</span>, bbox_inches=<span class="string">&#x27;tight&#x27;</span>, pad_inches=<span class="number">0.01</span>)</span><br><span class="line">fig.close()</span><br></pre></td></tr></table></figure><h1 id="python-相关"><a class="markdownIt-Anchor" href="#python-相关"></a> python 相关</h1><h2 id="利用正则表达式获取当前目录下的某些文件"><a class="markdownIt-Anchor" href="#利用正则表达式获取当前目录下的某些文件"></a> 利用正则表达式获取当前目录下的某些文件</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> glob</span><br><span class="line">files = glob.iglob(<span class="string">r&#x27;0.*&#x27;</span>)</span><br><span class="line"><span class="keyword">for</span> file <span class="keyword">in</span> files:</span><br><span class="line">    <span class="built_in">print</span> file</span><br></pre></td></tr></table></figure><p>普通版本：</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">files = [<span class="string">&#x27;0.1&#x27;</span>, <span class="string">&#x27;0.2&#x27;</span>]</span><br><span class="line"><span class="keyword">for</span> file <span class="keyword">in</span> files:</span><br><span class="line">    <span class="built_in">print</span> file</span><br></pre></td></tr></table></figure><h2 id="换行"><a class="markdownIt-Anchor" href="#换行"></a> 换行</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">ylabel(<span class="string">&#x27;this is vertical\ntest&#x27;</span>, multialignment=<span class="string">&#x27;center&#x27;</span>)<span class="comment">#\n 表示换行</span></span><br></pre></td></tr></table></figure><h2 id="灰色系列填充彩图"><a class="markdownIt-Anchor" href="#灰色系列填充彩图"></a> 灰色系列填充彩图</h2><h2 id="在图中使用其它字体"><a class="markdownIt-Anchor" href="#在图中使用其它字体"></a> 在图中使用其它字体</h2><p><a target="_blank" rel="external nofollow noopener noreferrer" href="https://stackoverflow.com/a/53645383">https://stackoverflow.com/a/53645383</a><br>我成功操作的经历：</p><blockquote><p>把字体拷贝到：<br>/public/home/yao1/packages_ZY/anaconda_ZY/anaconda3/lib/python3.6/site-packages/matplotlib/mpl-data/fonts/ttf<br>然后：<br>rm -rf ~/.cache/matplotlib/</p></blockquote><p>使用字体：</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> matplotlib <span class="keyword">import</span> rcParams</span><br><span class="line">rcParams.update(&#123;<span class="string">&#x27;font.size&#x27;</span>: <span class="number">12</span>, <span class="string">&#x27;font.family&#x27;</span>: <span class="string">&#x27;Times New Roman&#x27;</span>&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> matplotlib <span class="keyword">import</span> rcParams</span><br><span class="line">rcParams.update(&#123;<span class="string">&#x27;font.size&#x27;</span>: <span class="number">12</span>, <span class="string">&#x27;font.family&#x27;</span>: <span class="string">&#x27;simsun&#x27;</span>&#125;)</span><br><span class="line"></span><br><span class="line">ax.legend(loc=<span class="string">&#x27;upper right&#x27;</span>, bbox_to_anchor=(<span class="number">0.92</span>, <span class="number">3.7</span>), ncol=<span class="number">3</span>,fontsize=<span class="number">10</span>,prop=&#123;<span class="string">&#x27;family&#x27;</span>:<span class="string">&#x27;simsun&#x27;</span>&#125;)</span><br><span class="line"></span><br><span class="line">plt.text(<span class="number">1.03</span>,<span class="number">5.4</span>,<span class="string">&#x27;平均值&#x27;</span>,fontname=<span class="string">&#x27;simsun&#x27;</span>)</span><br></pre></td></tr></table></figure><h1 id="疑难解答"><a class="markdownIt-Anchor" href="#疑难解答"></a> 疑难解答</h1><h2 id="服务器绘图"><a class="markdownIt-Anchor" href="#服务器绘图"></a> 服务器绘图</h2><p>报错 <code>QXcbConnection: Could not connect to display</code></p><p>solution：<br>在脚本的 ** 最前边 ** 加上</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> matplotlib</span><br><span class="line">matplotlib.use(<span class="string">&#x27;Agg&#x27;</span>)</span><br></pre></td></tr></table></figure><h1 id="范例"><a class="markdownIt-Anchor" href="#范例"></a> 范例</h1><p>散点图，另外用颜色表示散点密度</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">density_scatter</span>(<span class="params">x, y, ax=<span class="literal">None</span>, sort=<span class="literal">True</span>, bins=<span class="number">20</span>, **kwargs</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    Scatter plot colored by 2d histogram</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    <span class="keyword">from</span> scipy.interpolate <span class="keyword">import</span> interpn</span><br><span class="line">    <span class="keyword">if</span> ax <span class="keyword">is</span> <span class="literal">None</span>:</span><br><span class="line">        fig, ax = plt.subplots()</span><br><span class="line">    data, x_e, y_e = np.histogram2d(x, y, bins=bins)</span><br><span class="line">    z = interpn((<span class="number">0.5</span>*(x_e[<span class="number">1</span>:] + x_e[:-<span class="number">1</span>]), <span class="number">0.5</span>*(y_e[<span class="number">1</span>:]+y_e[:-<span class="number">1</span>])), data, np.vstack([x,y]).T, method=<span class="string">&quot;splinef2d&quot;</span>, bounds_error=<span class="literal">False</span> )</span><br><span class="line"></span><br><span class="line">    <span class="comment"># Sort the points by density, so that the densest points are plotted last</span></span><br><span class="line">    <span class="keyword">if</span> sort :</span><br><span class="line">        idx = z.argsort()</span><br><span class="line">        x, y, z = x[idx], y[idx], z[idx]</span><br><span class="line"></span><br><span class="line">    ax.scatter(x, y, c=z)</span><br><span class="line">    <span class="keyword">return</span> ax</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">cax=density_scatter(x, y, bins = [<span class="number">50</span>,<span class="number">50</span>])</span><br><span class="line"><span class="comment">#plt.colorbar(cax) # sorry, you cannot have a colorbar</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># method 2: scatter with density, but gaussian_kde is quite slow</span></span><br><span class="line"><span class="keyword">from</span> scipy.stats <span class="keyword">import</span> gaussian_kde</span><br><span class="line">xy = np.vstack([x,y])</span><br><span class="line">z = gaussian_kde(xy)(xy)</span><br><span class="line">plt.scatter(x, y,c=z, s=<span class="number">100</span>, edgecolor=<span class="string">&#x27;&#x27;</span>)</span><br><span class="line">plt.colorbar()</span><br></pre></td></tr></table></figure></div></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者:</span> <span class="post-copyright-info"><a href="mailto:undefined" rel="external nofollow noopener noreferrer" target="_blank">Yan Zhang</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接:</span> <span class="post-copyright-info"><a href="https://openfoam.top/matplotlib/">https://openfoam.top/matplotlib/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明:</span> <span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a target="_blank" rel="external nofollow noopener noreferrer" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://openfoam.top">OpenFOAM 成长之路</a>！</span></div></div><div class="post-meta__tag-list"></div><div class="post-qr-code"><div class="post-qr-code-item"><img class="post-qr-code__img" src="/album/wechatPay.jpg"><div class="post-qr-code__desc">您的肯定会给我更大动力~</div></div></div><div class="social-share pull-right" data-disabled="tencent,douban,qzone,diandian,facebook,twitter,google"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js@1.0.16/dist/css/share.min.css"><script src="https://cdn.jsdelivr.net/npm/social-share.js@1.0.16/dist/js/social-share.min.js"></script><nav id="pagination"><div class="prev-post pull-left"><a href="/spraySubModels/"><i class="fa fa-chevron-left"></i><span>OpenFOAM 中的喷雾子模型</span></a></div><div class="next-post pull-right"><a href="/adjustableWrite/"><span>自适应输出间隔</span><i class="fa fa-chevron-right"></i></a></div></nav><div id="gitalk-container"></div><script>var gitalk=new Gitalk({clientID:"9dfad189aeefc4c2dde2",clientSecret:"69b4d95e0c4be2508135adae20b05bf6f298f386",repo:"zhangyantju.github.io",owner:"ZhangYanTJU",admin:"ZhangYanTJU",id:md5(decodeURI(location.pathname)),language:"zh-CN"});gitalk.render("gitalk-container")</script></div></div><footer><div class="layout" id="footer"><div class="copyright">&copy;2018 - 2024 By Yan Zhang</div><div class="framework-info"><span>驱动 -</span> <a target="_blank" rel="external nofollow noopener noreferrer" href="http://hexo.io"><span>Hexo</span></a><span class="footer-separator">|</span><span>主题 -</span> <a target="_blank" rel="external nofollow noopener noreferrer" href="https://github.com/Molunerfinn/hexo-theme-melody"><span>Melody</span></a></div></div></footer><i class="fa fa-arrow-up" id="go-up" aria-hidden="true"></i><script src="https://cdn.jsdelivr.net/npm/animejs@latest/anime.min.js"></script><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-animate@latest/velocity.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-ui-pack@latest/velocity.ui.min.js"></script><script src="/js/utils.js?version=1.9.1"></script><script src="/js/fancybox.js?version=1.9.1"></script><script src="/js/sidebar.js?version=1.9.1"></script><script src="/js/copy.js?version=1.9.1"></script><script src="/js/fireworks.js?version=1.9.1"></script><script src="/js/transition.js?version=1.9.1"></script><script src="/js/scroll.js?version=1.9.1"></script><script src="/js/head.js?version=1.9.1"></script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@latest/dist/katex.min.css"><script src="https://cdn.jsdelivr.net/npm/katex-copytex@latest/dist/katex-copytex.min.js"></script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex-copytex@latest/dist/katex-copytex.min.css"><script src="/js/katex.js"></script><script src="/js/search/local-search.js"></script><script>/Android|webOS|iPhone|iPod|iPad|BlackBerry/i.test(navigator.userAgent)&&($("#nav").addClass("is-mobile"),$("footer").addClass("is-mobile"),$("#top-container").addClass("is-mobile"))</script><div class="search-dialog" id="local-search"><div class="search-dialog__title" id="local-search-title">本地搜索</div><div id="local-input-panel"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章"></div></div></div><hr><div id="local-search-results"><div id="local-hits"></div><div id="local-stats"><div class="local-search-stats__hr" id="hr"><span>由</span> <a target="_blank" rel="external nofollow noopener noreferrer" href="https://github.com/wzpan/hexo-generator-search" style="color:#49b1f5">hexo-generator-search</a> <span>提供支持</span></div></div></div><span class="search-close-button"><i class="fa fa-times"></i></span></div><div class="search-mask"></div></body></html>
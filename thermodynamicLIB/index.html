<!DOCTYPE html><html lang="zh-Hans"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"><meta name="description" content="OpenFOAM 热物理库深度解析"><meta name="keywords" content="thermophysicalModels,RTS"><meta name="author" content="Yan Zhang"><meta name="copyright" content="Yan Zhang"><title>OpenFOAM 热物理库深度解析 | OpenFOAM 成长之路</title><link rel="shortcut icon" href="/album/192.jpg"><link rel="stylesheet" href="/css/index.css?version=1.9.1"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@latest/css/font-awesome.min.css?version=1.9.1"><meta name="format-detection" content="telephone=no"><meta http-equiv="x-dns-prefetch-control" content="on"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk/dist/gitalk.min.css"><script src="https://cdn.jsdelivr.net/npm/gitalk@latest/dist/gitalk.min.js"></script><script src="https://cdn.jsdelivr.net/npm/blueimp-md5@2.10.0/js/md5.min.js"></script><link rel="dns-prefetch" href="https://hm.baidu.com"><script>var _hmt=_hmt||[];!function(){var e=document.createElement("script");e.src="https://hm.baidu.com/hm.js?38997e7d3b8e8c254bf0ddb7d2452127";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}()</script><link rel="dns-prefetch" href="https://www.google-analytics.com"><script>!function(e,a,t,n,g,c,o){e.GoogleAnalyticsObject="ga",e.ga=e.ga||function(){(e.ga.q=e.ga.q||[]).push(arguments)},e.ga.l=1*new Date,c=a.createElement(t),o=a.getElementsByTagName(t)[0],c.async=1,c.src="https://www.google-analytics.com/analytics.js",o.parentNode.insertBefore(c,o)}(window,document,"script"),ga("create","UA-119919860-1","auto"),ga("send","pageview")</script><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><script>var GLOBAL_CONFIG={root:"/",algolia:void 0,localSearch:{path:"search.xml",languages:{hits_empty:"找不到您查询的内容:${query}"}},copy:{success:"复制成功",error:"复制错误",noSupport:"浏览器不支持"},hexoVersion:"6.3.0"}</script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/hexo-math@4.0.0/dist/style.css"><meta name="generator" content="Hexo 6.3.0"><link rel="alternate" href="/atom.xml" title="OpenFOAM 成长之路" type="application/atom+xml"></head><body><i class="fa fa-arrow-right" id="toggle-sidebar" aria-hidden="true"></i><div id="sidebar" data-display="true"><div class="toggle-sidebar-info text-center"><span data-toggle="切换文章详情">切换站点概览</span><hr></div><div class="sidebar-toc"><div class="sidebar-toc__title">目录</div><div class="sidebar-toc__progress"><span class="progress-notice">你已经读了</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar"></div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#of-7"><span class="toc-number">1.</span> <span class="toc-text">OF-7</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#uml-%E7%B1%BB%E5%9B%BE"><span class="toc-number">1.1.</span> <span class="toc-text">UML 类图</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%B1%82%E8%A7%A3%E5%99%A8%E4%B8%AD%E5%88%9B%E5%BB%BA%E5%AF%B9%E8%B1%A1"><span class="toc-number">2.</span> <span class="toc-text">求解器中创建对象</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#rts-%E9%80%89%E6%8B%A9%E7%83%AD%E7%89%A9%E7%90%86%E6%A8%A1%E5%9E%8B"><span class="toc-number">3.</span> <span class="toc-text">RTS 选择热物理模型</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BB%8E%E5%AD%97%E5%85%B8%E6%96%87%E4%BB%B6%E7%9A%84%E8%AE%BE%E7%BD%AE%E5%BC%80%E5%A7%8B"><span class="toc-number">3.1.</span> <span class="toc-text">从字典文件的设置开始</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#rts-%E5%BA%93%E7%9A%84%E7%94%9F%E6%88%90"><span class="toc-number">4.</span> <span class="toc-text">RTS 库的生成</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#definethermophysicsreactionthermo"><span class="toc-number">4.1.</span> <span class="toc-text">defineThermoPhysicsReactionThermo</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#makethermophysicsreactionthermos"><span class="toc-number">4.2.</span> <span class="toc-text">makeThermoPhysicsReactionThermos</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#of-8"><span class="toc-number">5.</span> <span class="toc-text">OF-8</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#of-10"><span class="toc-number">6.</span> <span class="toc-text">OF-10</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#of-11"><span class="toc-number">7.</span> <span class="toc-text">OF-1.1</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#of-12"><span class="toc-number">8.</span> <span class="toc-text">OF-1.2</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#of-13"><span class="toc-number">9.</span> <span class="toc-text">OF-1.3</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#of-14"><span class="toc-number">10.</span> <span class="toc-text">OF-1.4</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#of-15"><span class="toc-number">11.</span> <span class="toc-text">OF-1.5</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#of-16"><span class="toc-number">12.</span> <span class="toc-text">OF-1.6</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#of-170"><span class="toc-number">13.</span> <span class="toc-text">OF-1.7.0</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#of-20x"><span class="toc-number">14.</span> <span class="toc-text">OF-2.0.x</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#of-23x"><span class="toc-number">15.</span> <span class="toc-text">OF-2.3.x</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#of-4x"><span class="toc-number">16.</span> <span class="toc-text">OF-4.x</span></a></li></ol></div></div><div class="author-info hide"><div class="author-info__avatar text-center"><img src="/album/192.jpg"></div><div class="author-info__name text-center">Yan Zhang</div><div class="author-info__description text-center">OpenFOAM 成长之路</div><div class="follow-button"><a target="_blank" rel="external nofollow noopener noreferrer" href="https://github.com/ZhangYanTJU">Follow Me</a></div><hr><div class="author-info-articles"><a class="author-info-articles__archives article-meta" href="/archives"><span class="pull-left">文章</span><span class="pull-right">43</span></a><a class="author-info-articles__tags article-meta" href="/tags"><span class="pull-left">标签</span><span class="pull-right">35</span></a><a class="author-info-articles__categories article-meta" href="/categories"><span class="pull-left">分类</span><span class="pull-right">8</span></a></div><hr><div class="author-info-links"><div class="author-info-links__title text-center">友情链接</div><a class="author-info-links__name text-center" target="_blank" rel="external nofollow noopener noreferrer" href="https://zmeng.tech/">Zmeng Blogs</a></div></div></div><div id="content-outer"><div class="plain" id="top-container"><div id="page-header"><span class="pull-left"><a id="site-name" href="/">OpenFOAM 成长之路</a></span><i class="fa fa-bars toggle-menu pull-right" aria-hidden="true"></i> <span class="pull-right menus"><a class="site-page" href="/">首页</a><a class="site-page" href="/about">关于</a><a class="site-page" href="/release">Timeline</a></span><span class="pull-right"><a class="site-page social-icon search"><i class="fa fa-search"></i> <span>搜索</span></a></span></div></div><div class="layout" id="content-inner"><article id="post"><div class="plain" id="post-title">OpenFOAM 热物理库深度解析</div><div id="post-meta"><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2018-03-03</time><span class="post-meta__separator">|</span><i class="fa fa-inbox" aria-hidden="true"></i> <a class="post-meta__categories" href="/categories/code-analysis/">code analysis</a><span class="post-meta__separator">|</span><span class="post-meta-wordcount"><span>字数总计:</span> <span class="word-count">3.1k</span><span class="post-meta__separator">|</span><span>阅读时长: 14 分钟</span></span></div><div class="article-container" id="post-content"><p>本帖描述 OpenFOAM 热物理库的框架结构（以OF-7为基础，同时也尝试追踪自OpenFOAM开创以来，整个热物理库的架构变迁过程），希望对你有用。</p><span id="more"></span><h1 id="of-7"><a class="markdownIt-Anchor" href="#of-7"></a> OF-7</h1><h2 id="uml-类图"><a class="markdownIt-Anchor" href="#uml-类图"></a> UML 类图</h2><p>下图是热物理库部分类的 UML 类图。欲获取更佳阅读体验，可以右键在新标签页打开该图。</p><details><summary>OF-7 UML</summary><img src="http://www.plantuml.com/plantuml/svg/lHlRRjp6zJdwYe4DB5RAwfBqJL85oAfaEufYmI8gfAuZZCXPaHLl8Rbhgwe0eobI6mMIFhHewlgbG8eQ1T8Kw8lh8dyZoSbVT2uSSeOpGyxk6is3u-MS-vnpvfmpupc0_tD3cESWJv4R870-1yh_Zex0VXQCOO601mk8VrTBYu-Ip0CnZ93mBNTX23FmiVefIi9359punH5ONWOFJa-MJ_6dXoAdFHGTemmCHx5R14cSYzpUTV670X2UFSgqFm_efngYP7J8L_HyEDZ7HWBt9G8VB6CIkmp_Oex-hxJI-gyM5q6AiY5oYzimNmK7zFjSRSvwSPsjRPnRwriAa_b9FnquNABp31MZB0RfSh_mWtnn0mkxuColNN1beqz-fEfwHqTYfKGY2geeMsaxJl_q1EogQDjJS1fFnUb0XxLO6oLCJlhfydvUUDWw2dQQ1phyzvPMT8R5cx2SWWVv9-zZ-xwlol8paHOdjKRbrrbsJrQvHAZOhgcAbuvN-nDplb_060uT7sLHiWgsFnr1uaRtXWS5ZbV13GMmzGRKXbsebw8xOVBeQ00S7ySn-R-RH54I2t1kWeR3pIo3Pu30RALRv4EkXy34L03Bi22I60EOocTUPLAhwsmtQW5xaWusy896HlPoO3KpZ1IrK0UfWSijuTn-Dz11btHuWuPP4e4xHR9TK9zQkgFR8Td7s_JS5kLNLw5k5Kinof47Xaa6Fe1kSXp0M2U5TzjpsgXxMwaAmDCyYlFWE4JRSU73C3rZCSUIVxx4T0Uhm3bBaHv-QMb30qx_8aHd4ssTGKnoLE183bnwDW8Ke-pax2DwGFAiTiE_eKc1M-cuppQ7CUm19kD0p8jrSg8xJPqNuBG8BbgtT2kzTKRe0nC3K7BuULppU8zJrRZkzcIak6FcghWgSST8tIVqLypq7Sp07m32OuKm4Rr7IBecns6UG8gPF8KkuX1b-SMyWq6NFZ6WpgRFsJzHSZRp2gPOgMgHX2Q882v011_VBL1sfADVUk2EpWEhym7qXzHaWpwJUtLrOMTU-E7jU8xuEmoYe9ZN17UhlnVO21uQQcrJVgo2KWoG80w36B4uyH6BaJLjN52liKXT9p2Ae09jZWS1KkVZEhOgiTkMS9kMS6wg0yH5iqvZ7ng0DQ2vFQXoD6d1yaa4HTRStV44T96zLiZULYVMaFOqTrlTRJTjNtRRbn-tByUjooJZtY5viqgk6f2yVoSVj8F0JYgujjZk0e5T8Dwkwpd7Px99rCJXkQoMQ81Sp5q8NMEL_zcPC2A_GXXxJWRZF4soGbSXg53Q8g6hVD_CIT4-UR4TZLftynIcAMo5m6MD3tq5f3mfuN5UPD0jm37C0tSlU8oFM7IkfdjnMVf1aZstDVbJ0gHsPbz6OH5i9L6Qn2WkodMT13guXg6J0lTXkFviclfckSiEn1KTtt9X-SCWBzQFaoJS09XVC1Pc9pVtYumkZvFmWDfj9q2Xjo4EKxesZ5Y2dcitp9hSc3UPLWUj6BhP_uWAz_WljViXEfDl1GpYl2yESnWAaLgFnEpK3-4n2alWmD2BrTRjSJG5Sfm47gwvYqqTMHNiRWpR0GsxrYC3fgPyRR2gd28C0M4qc1o1GhiBtfQ-iYcsZDfsiupq5ZUhmvHDohJXoTAX2dLkZ009pEZv4bIBnu-3h1Z1a5VJXq5VzaVmOx12ZcHrwDZ0n7rKYIbsMoMsMcqsiSUpOEDJimEx1JUV0TSrMAi3xs0MPRTd4FZszAYRqwFYmxO5bqnubtCpDZkBMmWSOlmMUvKdjKXWCW78lBf3VZwX5fE2784q6KJ6urgxmgOjQgLKDTfLABCieYMoNeDQbbOyfGk8_10a7Ra06OqAMXJKa21YNAs0VYgsxbNw4k3gndTjmakLcaWFk2WCIsD81mZvRZfsHVmK5gw_0rs-bttw8HY8j8PusOOMuOdLhYWDdC5C8ZLeJIYPPgTxubRp8vnFtKGl4CTljBB84FHA-te1tHYOdVN4QOIgnmagFanmbB5lqkx8YLKdmOCIvE6QDAMAp8Sn5X4B5f-8aTVuPXzprH7Ue31vm9LAKPdpW5XEghM5xuAVbrOAVecQkyHtzJwLAub5WJPMLncAk7qwm1v8KfJ18iaUF6oKNPPy1Fn0OYSLsKsbkVy9tmrUA9gbyW2XAsKsDEux71K9ri0CKAgd1z2w3eMKqlugQ1PTbTT8SEi2cEmqL_zyVlcVPvUlFrVFbCjNtxnv_flhPq-kNpnxy_hRx__y_Egttrt_yL-YRn4ANpvzyuT_Nt_r1IPo-Uh9vUk_c83VFUVINP1oRXxxV16bpT9-xfrt6e3YFBQie75VhFdgyA_CbLYsucnoaOTMfB6jIEF_bqYiDh6JYi5QCfDH3uqiXBntzrwTTeNUGnYzw9eEjcmx2hZwyjVOPwwU_kdxlxvaxfS21_YinYh03vzzT_tLjneprnJ4nWhZvBIp4JWqMx7Kk0OSynALHrW-U1HWKmClzOeZlQfjTm6AK66Id8xIUzaMKIORkKMvhSFn7ihz7eZmd-KXxFemMw2lEvfdy4rY19fXV7Gh6SKUtZSI_xdGPEjWRc6ZDU6wYY9wGBj9bc5biI_XqhLU4spJpBJKNaBgncmsNHUHEvoaBCwyCwnRu09o7u7066O1IRjDxeqznNn8vRmF7tPrugaqH9SGDE50I_Ms-hn2p9jOF1OxS9lo-OYPKzS5wJNoKR-ZUz8fHaV_ZWLYhcA9vI3n9LQ5vbCIqnlAHWMtFobBCbHd5vRTEjYHKQIVrRVrc-n8RhlRua1E6Gkx7TRRIlkTWm95SVOmesNBbZlPZgTXEvwLBRk4RAAsyUJNbYQsdUQTIj5qPatvDUeakjPNhrDgUwXBaetndiBrq9mZbMUFGYHL3TJaKKHFyURJHtbKewde69OignPNPnbUqBLFc1JRbFT5Mllea9jisOmAzJjdOmfdZgchAoreQVNV7WxxsXsPpYw472iG1pDQgAOqfQ4wHH7fYCCyyTNBC1m5ddYZYHlH3BixUV5KpGls4W_lX1Q-KOOBo-TJ5NJt_KI_NG2BK42ytAZu3ALM7YZ-fpuFrUrDD9h2SSaDxFH-6e-al81bRESMZpGPGS0gzrhOY_8jT1xeTgxwRDiuDVeJZ7-qPboDHaVIl5FmGDPqYGtyrOkNrzzypSO4iekKK-okEhbwVtsqGCMwq9DehvYbjvIr4QSGTrBFFjV8s-dWTbQg_Th294r_bXuvStUfd8hFpCnfGG6INEtolt-xVFKxt6oRPZbSJdLirAC9gvwjuRXRKz2O1RkHgz3bZnMOmfgx3nyv_9LWSoQcgAfWt39DCZZCkW0n0CPfcds4-kZ8_iwXSWhCaBJweW2hgytBrvvaGXv-2-In_9hHcQSXBJVpHWRqyI3hU3uI_XKAnvCOrZSo-E_yNdfU7X4ewUhgwx__yDdBgwUVJvW8rCQPoqHsvwBjvh6hzxOcrDsCTo1Ftf1FGL0zsoPHf_KHlP4rxQfH-LHOcgAgEarEJd-wcD7BPzmDnFOBzOu-knDNRNhVXW3Z_jIuSjlSQ0IDajSlVdN2Mzd-RUcUpg1yivEsLLzyoAm994lkNVz4pyZ-qDowhLdGQczWsvv7M3MnNGIw6jdMznN6PjQYUU-qGMSJExbjXEuHl0KpgTti5DPgbqdJpbPLLLbZxKiT3gizXQ-iiAf-ccghHIoOEmfXWUXL5IdYMqk2wnTFhdx_1RcEVFKFgwgWlhmGg5_y3m00"></details><h1 id="求解器中创建对象"><a class="markdownIt-Anchor" href="#求解器中创建对象"></a> 求解器中创建对象</h1><p><code>solver</code> 中的 <code>createFields.H</code> 中：</p><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="function">autoPtr&lt;psiReactionThermo&gt; <span class="title">pThermo</span><span class="params">(psiReactionThermo::New(mesh))</span></span>;</span><br><span class="line">psiReactionThermo&amp; thermo = <span class="built_in">pThermo</span>();</span><br></pre></td></tr></table></figure><p>创建 <code>thermo</code>，在 <code>reactingFoam</code> 自带算例中，创建的是 <code>hePsiThermo</code> 的对象，但是这里 thermo 是基类 <code>psiReactionThermo</code> 的引用，即只能使用 <code>psiReactionThermo</code> 这一继承链的方法。</p><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line">basicSpecieMixture&amp; composition = thermo.<span class="built_in">composition</span>();</span><br></pre></td></tr></table></figure><p>创建 <code>composition</code>，是指系统中的混合物。可以调用继承链中 <code>mixture</code> 这一分支的方法。</p><p>燃烧类的求解器中，一般都没有对单个组分进行操作，这些操作都在热物理库里边进行。</p><p><code>multiComponentMixture</code> 类中的私有数据 <code>speciesData_</code> 的类型是 <code>PtrList&lt;sutherlandTransport&lt;species::thermo&lt;janafThermo&lt;perfectGas&lt;specie&gt;&gt;,sensibleEnthalpy&gt;&gt;&gt;</code>，它是组分的 <code>list</code>，可以用它获取组分的所有信息。solver 中可以通过 <code>multiComponentMixture</code> （<code>solver</code> 中<code>composition</code> 的类型是 <code>basicSpecieMixture</code>，需要强制转换成 <code>multiComponentMixture</code> 才行 ） 的 <code>speciesData()</code> 或者 <code>getLocalThermo(speciei)</code> 这两个函数来调用。如：</p><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="keyword">dynamic_cast</span>&lt;<span class="type">const</span> multiComponentMixture&lt;gasHThermoPhysics&gt;&amp;&gt;(composition).<span class="built_in">speciesData</span>()[speciei].<span class="built_in">rho</span>(p,T)</span><br></pre></td></tr></table></figure><p>也可以通过 <code>multiComponentMixture</code> 的派生类 <code>reactingMixture</code> 来调用。</p><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="keyword">dynamic_cast</span>&lt;<span class="type">const</span> reactingMixture&lt;gasHThermoPhysics&gt;&amp;&gt;(composition).<span class="built_in">speciesData</span>()[speciei].<span class="built_in">rho</span>(p,T)</span><br></pre></td></tr></table></figure><p>也可以通过派生类的派生类 <code>SpecieMixture</code> 来调用。</p><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="keyword">dynamic_cast</span>&lt;<span class="type">const</span> SpecieMixture&lt;reactingMixture&lt;gasHThermoPhysics&gt;&gt;&amp;&gt;(composition).<span class="built_in">speciesData</span>()[speciei].<span class="built_in">rho</span>(p,T)</span><br></pre></td></tr></table></figure><p>上述操作说明可以使用组分列表调用单个组分的函数（即 <code>sutherlandTransport&lt;species::thermo&lt;janafThermo&lt;perfectGas&lt;specie&gt;&gt;,sensibleEnthalpy&gt;&gt;</code> 继承链中的任何函数），如 <code>speciesData_[i].rho(p, T)</code>，这里的 <code>rho(p,T)</code> 来自于 <code>perfectGas</code> 类。</p><p>也可以在求解器中重新构造组分列表：</p><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="function">autoPtr&lt;psiReactionThermo&gt; <span class="title">pThermo</span><span class="params">(psiReactionThermo::New(mesh))</span></span>;</span><br><span class="line">psiReactionThermo&amp; thermo = <span class="built_in">pThermo</span>();</span><br><span class="line"></span><br><span class="line">basicSpecieMixture&amp; composition = thermo.<span class="built_in">composition</span>();</span><br><span class="line">PtrList&lt;volScalarField&gt;&amp; Y = composition.<span class="built_in">Y</span>();</span><br><span class="line"></span><br><span class="line"><span class="function">PtrList&lt;gasHThermoPhysics&gt; <span class="title">specieData</span><span class="params">(Y.size())</span></span>;</span><br><span class="line">forAll(specieData, i)</span><br><span class="line">&#123;</span><br><span class="line"><span class="comment">//对于每个组分，通过 thermo 调用 Lib 中的 speciesData_ 来构造 solver 中的 specieData</span></span><br><span class="line">    specieData.<span class="built_in">set</span></span><br><span class="line">    (</span><br><span class="line">        i,</span><br><span class="line">        <span class="keyword">new</span> <span class="built_in">gasHThermoPhysics</span></span><br><span class="line">        (</span><br><span class="line">            <span class="keyword">dynamic_cast</span>&lt;<span class="type">const</span> reactingMixture&lt;gasHThermoPhysics&gt;&amp;&gt;</span><br><span class="line">                (thermo).<span class="built_in">speciesData</span>()[i]</span><br><span class="line">        )</span><br><span class="line">    );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 每个网格构造一个 mixture,这个 mixture 相当于 multiComponentMixture 中的私有数据 mixture_。</span></span><br><span class="line"><span class="comment">// 它是混合物等效成的一个组分，和单个组分同一类型，即 `gasHThermoPhysics`。</span></span><br><span class="line">forAll(T, celli)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="function">gasHThermoPhysics <span class="title">mixture</span><span class="params">(<span class="number">0.</span>*specieData[<span class="number">0</span>])</span></span>;</span><br><span class="line">    forAll(Y, speciei)</span><br><span class="line">    &#123;</span><br><span class="line">        mixture += Y[speciei][celli]*specieData[speciei];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>gasHThermoPhysics</code> 是 <code>sutherlandTransport&lt;species::thermo&lt;janafThermo&lt;perfectGas&lt;specie&gt;&gt;,sensibleEnthalpy&gt;&gt;</code> 的别名，它是单个组分的类型。<br>事实上，<code>multiComponentMixture</code> 类中的函数 <code>cellMixture</code> 函数可以用于获取 <code>mixture_</code>。</p><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">class</span> <span class="title class_">ThermoType</span>&gt;</span><br><span class="line"><span class="type">const</span> ThermoType&amp; Foam::multiComponentMixture&lt;ThermoType&gt;::<span class="built_in">cellMixture</span></span><br><span class="line">(</span><br><span class="line">    <span class="type">const</span> label celli</span><br><span class="line">) <span class="type">const</span></span><br><span class="line">&#123;</span><br><span class="line">    mixture_ = Y_[<span class="number">0</span>][celli]*speciesData_[<span class="number">0</span>];</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (label n=<span class="number">1</span>; n&lt;Y_.<span class="built_in">size</span>(); n++)</span><br><span class="line">    &#123;</span><br><span class="line">        mixture_ += Y_[n][celli]*speciesData_[n];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> mixture_;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>使用方法参考 hePsiThermo.C</p><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="type">const</span> scalarField&amp; hCells = <span class="keyword">this</span>-&gt;he_;</span><br><span class="line"><span class="type">const</span> scalarField&amp; pCells = <span class="keyword">this</span>-&gt;p_;</span><br><span class="line"></span><br><span class="line">scalarField&amp; TCells = <span class="keyword">this</span>-&gt;T_.<span class="built_in">primitiveFieldRef</span>();</span><br><span class="line">scalarField&amp; psiCells = <span class="keyword">this</span>-&gt;psi_.<span class="built_in">primitiveFieldRef</span>();</span><br><span class="line">scalarField&amp; muCells = <span class="keyword">this</span>-&gt;mu_.<span class="built_in">primitiveFieldRef</span>();</span><br><span class="line">scalarField&amp; alphaCells = <span class="keyword">this</span>-&gt;alpha_.<span class="built_in">primitiveFieldRef</span>();</span><br><span class="line"></span><br><span class="line">forAll(TCells, celli)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">const</span> <span class="keyword">typename</span> MixtureType::thermoType&amp; mixture_ =</span><br><span class="line">        <span class="keyword">this</span>-&gt;<span class="built_in">cellMixture</span>(celli);</span><br><span class="line"></span><br><span class="line">    TCells[celli] = mixture_.<span class="built_in">THE</span></span><br><span class="line">    (</span><br><span class="line">        hCells[celli],</span><br><span class="line">        pCells[celli],</span><br><span class="line">        TCells[celli]</span><br><span class="line">    );</span><br><span class="line"></span><br><span class="line">    psiCells[celli] = mixture_.<span class="built_in">psi</span>(pCells[celli], TCells[celli]);</span><br><span class="line"></span><br><span class="line">    muCells[celli] = mixture_.<span class="built_in">mu</span>(pCells[celli], TCells[celli]);</span><br><span class="line">    alphaCells[celli] = mixture_.<span class="built_in">alphah</span>(pCells[celli], TCells[celli]);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="rts-选择热物理模型"><a class="markdownIt-Anchor" href="#rts-选择热物理模型"></a> RTS 选择热物理模型</h1><h2 id="从字典文件的设置开始"><a class="markdownIt-Anchor" href="#从字典文件的设置开始"></a> 从字典文件的设置开始</h2><p>下面介绍我们是如何从 <code>thermophysicalProperties</code> 字典文件中的下列设置构建对象的：</p><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line">thermoType</span><br><span class="line">&#123;</span><br><span class="line">    type            hePsiThermo;</span><br><span class="line">    mixture         reactingMixture;</span><br><span class="line">    transport       sutherland;</span><br><span class="line">    thermo          janaf;</span><br><span class="line">    energy          sensibleEnthalpy;</span><br><span class="line">    equationOfState perfectGas;</span><br><span class="line">    specie          specie;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>solver 中创建模型：</p><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="function">autoPtr&lt;psiReactionThermo&gt; <span class="title">pThermo</span><span class="params">(psiReactionThermo::New(mesh))</span></span>;</span><br></pre></td></tr></table></figure><p>这个函数定义于 <code>psiReactionThermo</code>：</p><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line">Foam::autoPtr&lt;Foam::psiReactionThermo&gt; Foam::psiReactionThermo::<span class="built_in">New</span></span><br><span class="line">(</span><br><span class="line">    <span class="type">const</span> fvMesh&amp; mesh,</span><br><span class="line">    <span class="type">const</span> word&amp; phaseName</span><br><span class="line">)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">return</span> basicThermo::<span class="built_in">New</span>&lt;psiReactionThermo&gt;(mesh, phaseName);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>它调用了 <code>basicThermo</code> 中的 <code>New</code> 函数：</p><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">class</span> <span class="title class_">Thermo</span>&gt;</span><br><span class="line">Foam::autoPtr&lt;Thermo&gt; Foam::basicThermo::<span class="built_in">New</span>(<span class="type">const</span> fvMesh&amp; mesh,<span class="type">const</span> word&amp; phaseName)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">// IOdictionary thermoDict---thermophysicalProperties</span></span><br><span class="line">    <span class="keyword">typename</span> Thermo::fvMeshConstructorTable::iterator cstrIter =</span><br><span class="line">        <span class="built_in">lookupThermo</span>&lt;Thermo, <span class="keyword">typename</span> Thermo::fvMeshConstructorTable&gt;</span><br><span class="line">        (</span><br><span class="line">            thermoDict,</span><br><span class="line">            Thermo::fvMeshConstructorTablePtr_</span><br><span class="line">        );</span><br><span class="line"><span class="comment">//fvMeshConstructorTablePtr_</span></span><br><span class="line"><span class="comment">//这个是在 runTimeSelectionTables.H 的 declareRunTimeSelectionTable 函数中定义的。</span></span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">autoPtr</span>&lt;Thermo&gt;(<span class="built_in">cstrIter</span>()(mesh, phaseName));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>调用了 2 参数的 lookupThermo：<br><a target="_blank" rel="external nofollow noopener noreferrer" href="https://cpp.openfoam.org/v3/a09872_source.html">basicThermoTemplates.C</a> 中的 <code>lookupThermo</code> 函数：</p><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">class</span> <span class="title class_">Thermo</span>, <span class="keyword">class</span> <span class="title class_">Table</span>&gt;</span><br><span class="line"><span class="keyword">typename</span> Table::iterator Foam::basicThermo::<span class="built_in">lookupThermo</span></span><br><span class="line">(</span><br><span class="line">    <span class="type">const</span> dictionary&amp; thermoDict,</span><br><span class="line">    Table* tablePtr    <span class="comment">//即 fvMeshConstructorTablePtr_，它是哈希表add类型的一个指针，typeName和模型都存放在这里</span></span><br><span class="line">)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="type">const</span> word <span class="title">thermoTypeName</span></span></span><br><span class="line"><span class="function">    <span class="params">(</span></span></span><br><span class="line"><span class="params"><span class="function">    word(thermoTypeDict.lookup(<span class="string">&quot;type&quot;</span>)) + <span class="string">&#x27;&lt;&#x27;</span></span></span></span><br><span class="line"><span class="params"><span class="function">    + word(thermoTypeDict.lookup(<span class="string">&quot;mixture&quot;</span>)) + <span class="string">&#x27;&lt;&#x27;</span></span></span></span><br><span class="line"><span class="params"><span class="function">    + word(thermoTypeDict.lookup(<span class="string">&quot;transport&quot;</span>)) + <span class="string">&#x27;&lt;&#x27;</span></span></span></span><br><span class="line"><span class="params"><span class="function">    + word(thermoTypeDict.lookup(<span class="string">&quot;thermo&quot;</span>)) + <span class="string">&#x27;&lt;&#x27;</span></span></span></span><br><span class="line"><span class="params"><span class="function">    + word(thermoTypeDict.lookup(<span class="string">&quot;equationOfState&quot;</span>)) + <span class="string">&#x27;&lt;&#x27;</span></span></span></span><br><span class="line"><span class="params"><span class="function">    + word(thermoTypeDict.lookup(<span class="string">&quot;specie&quot;</span>)) + <span class="string">&quot;&gt;&gt;,&quot;</span></span></span></span><br><span class="line"><span class="params"><span class="function">    + word(thermoTypeDict.lookup(<span class="string">&quot;energy&quot;</span>)) + <span class="string">&quot;&gt;&gt;&gt;&quot;</span></span></span></span><br><span class="line"><span class="params"><span class="function">    )</span></span>;</span><br><span class="line"><span class="comment">//通过字典文件读入的数据，构造 thermoTypeName: //hePsiThermo&lt;reactingMixture&lt;sutherland&lt;janaf&lt;perfectGas&lt;specie&gt;&gt;,sensibleEnthalpy&gt;&gt;&gt;</span></span><br><span class="line"><span class="comment">//注意这里并不是类名，而是省略版</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">lookupThermo</span>&lt;Thermo, Table&gt;</span><br><span class="line">    (</span><br><span class="line">    thermoTypeDict,</span><br><span class="line">    tablePtr,</span><br><span class="line">    nCmpt,</span><br><span class="line">    cmptNames,</span><br><span class="line">    thermoTypeName</span><br><span class="line">    );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>最后返回值是调用 5 个参数的 <code>lookupThermo</code> 函数：</p><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">class</span> <span class="title class_">Thermo</span>, <span class="keyword">class</span> <span class="title class_">Table</span>&gt;</span><br><span class="line"><span class="keyword">typename</span> Table::iterator Foam::basicThermo::<span class="built_in">lookupThermo</span></span><br><span class="line">(</span><br><span class="line">    <span class="type">const</span> dictionary&amp; thermoTypeDict,</span><br><span class="line">    Table* tablePtr,</span><br><span class="line">    <span class="type">const</span> <span class="type">int</span> nCmpt,</span><br><span class="line">    <span class="type">const</span> <span class="type">char</span>* cmptNames[],</span><br><span class="line">    <span class="type">const</span> word&amp; thermoTypeName</span><br><span class="line">)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">// Lookup the thermo package</span></span><br><span class="line">    <span class="keyword">typename</span> Table::iterator cstrIter = tablePtr-&gt;<span class="built_in">find</span>(thermoTypeName);</span><br><span class="line">    <span class="keyword">return</span> cstrIter;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//上述步骤是根据字典文件在备选库中选择我们需要的组合，那么备选库是怎么形成的呢？</span></span><br></pre></td></tr></table></figure><p>第一个 <code>lookupThermo</code> 函数的作用是，将 <code>thermophysicalProperties</code> 字典文件中的设置翻译成：</p><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line">hePsiThermo&lt;reactingMixture&lt;sutherland&lt;janaf&lt;perfectGas&lt;specie&gt;&gt;,sensibleEnthalpy&gt;&gt;&gt;</span><br></pre></td></tr></table></figure><p>但该字符串并不是最终的 <code>class</code>，比如 <code>janaf</code>，实际上类名是 <code>janafThermo</code>。</p><p>第二个 <code>lookupThermo</code> 函数的作用就是，根据该字符串，在 <code>RTS</code> 库中找到我们选择的类。<br>那么上面提到的省略版字符串，怎么和 <code>RTS</code> 库中的组合匹配的呢？下面来看 <code>RTS</code> 库的生成过程。</p><h1 id="rts-库的生成"><a class="markdownIt-Anchor" href="#rts-库的生成"></a> RTS 库的生成</h1><p>按照<a target="_blank" rel="external nofollow noopener noreferrer" href="http://xiaopingqiu.github.io/2016/03/12/RTS1/">Giskard 博客</a>提到的 <code>RTS</code> 流程：</p><blockquote><ol><li>基类类体里调用 <code>TypeName</code> 和 <code>declareRunTimeSelectionTable</code> 两个函数，类体外面调用 <code>defineTypeNameAndDebug</code> 和 <code>defineRunTimeSelectionTable</code> 两个函数。</li><li>基类中需要一个静态 <code>New</code> 函数作为 <code>selector</code>。</li><li>派生类类体中需要调用 <code>TypeName</code> 函数，类体外调用 <code>defineRunTimeSelectionTable</code> 和 <code>addToRunTimeSelectionTable</code> 两个宏函数。</li></ol></blockquote><p>我们发现：<code>makeReactionThermo.H</code> 中有两个重要函数：<code>defineThermoPhysicsReactionThermo</code> 和 <code>makeThermoPhysicsReactionThermos</code>。</p><p>下面一一介绍：</p><h2 id="definethermophysicsreactionthermo"><a class="markdownIt-Anchor" href="#definethermophysicsreactionthermo"></a> defineThermoPhysicsReactionThermo</h2><p>其中的 <code>defineThermoPhysicsReactionThermo</code>, 这个函数通过一组形参列表得到 <code>CThermo##Mixture##ThermoPhys</code>，然后再转换成一串简化的字符串。这里的形参列表就是实例化所需要提供的各种类，对应<code>(psiReactionThermo,hePsiThermo,reactingMixture,sutherlandTransport)</code>。</p><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">define</span> defineThermoPhysicsReactionThermo(BaseReactionThermo,CThermo,Mixture,ThermoPhys) \</span></span><br><span class="line"><span class="meta">    typedef CThermo<span class="comment">//hePsiThermo                                                         \</span></span></span><br><span class="line"><span class="comment"><span class="meta">    &lt;                                                                                    \</span></span></span><br><span class="line"><span class="comment"><span class="meta">        BaseReactionThermo,//psiReactionThermo                                           \</span></span></span><br><span class="line"><span class="comment"><span class="meta">        SpecieMixture                                                                    \</span></span></span><br><span class="line"><span class="comment"><span class="meta">        &lt;                                                                                \</span></span></span><br><span class="line"><span class="comment"><span class="meta">            Mixture//reactingMixture                                                     \</span></span></span><br><span class="line"><span class="comment"><span class="meta">            &lt;                                                                            \</span></span></span><br><span class="line"><span class="comment"><span class="meta">                ThermoPhys//sutherlandTransport                                          \</span></span></span><br><span class="line"><span class="comment"><span class="meta">            &gt;                                                                            \</span></span></span><br><span class="line"><span class="comment"><span class="meta">        &gt;                                                                                \</span></span></span><br><span class="line"><span class="comment"><span class="meta">    &gt; CThermo##Mixture##ThermoPhys;                                                      \</span></span></span><br><span class="line"><span class="comment"><span class="meta">                                                                                         \</span></span></span><br><span class="line"><span class="comment"><span class="meta">    defineTemplateTypeNameAndDebugWithName                                               \</span></span></span><br><span class="line"><span class="comment"><span class="meta">    (                                                                                    \</span></span></span><br><span class="line"><span class="comment"><span class="meta">        CThermo##Mixture##ThermoPhys,                                                    \</span></span></span><br><span class="line"><span class="comment"><span class="meta">        (#CThermo&quot;&lt;&quot; + Mixture&lt;ThermoPhys&gt;::typeName() + &quot;&gt;&quot;).c_str(),                   \</span></span></span><br><span class="line"><span class="comment"><span class="meta">        0                                                                                \</span></span></span><br><span class="line"><span class="comment"><span class="meta">    )</span></span></span><br><span class="line"><span class="comment">//作用：把尖括号表示的类变成字符串 CThermo##Mixture##ThermoPhys，然后再变成简化的尖括号。</span></span><br></pre></td></tr></table></figure><p>如：</p><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line">hePsiThermo</span><br><span class="line">&lt;</span><br><span class="line">psiReactionThermo,</span><br><span class="line">    SpecieMixture</span><br><span class="line">    &lt;</span><br><span class="line">        reactingMixture</span><br><span class="line">        &lt;</span><br><span class="line">            sutherlandTransport</span><br><span class="line">            &lt;</span><br><span class="line">                species::thermo</span><br><span class="line">                &lt;</span><br><span class="line">                    janafThermo&lt;perfectGas&lt;specie&gt;&gt;,sensibleEnthalpy</span><br><span class="line">                &gt;</span><br><span class="line">            &gt;</span><br><span class="line">        &gt;</span><br><span class="line">    &gt;</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure><p>变成 <code>RTS</code> 库中保存的字符串：<br><code>hePsiThermo&lt;reactingMixture&lt;sutherland&lt;janaf&lt;perfectGas&lt;specie&gt;&gt;,sensibleEnthalpy&gt;&gt;&gt;</code><br>隐藏了一些信息，如 <code>psiReactionThermo</code>和 <code>SpecieMixture</code> 。</p><p>具体过程：<br><code>typeName()</code> 依次调用 <code>reactingMixture</code>，<code>sutherlandTransport</code>, <code>species::thermo</code>, <code>janafThermo</code>, <code>sensibleEnthalpy</code>, <code>perfectGas</code>, <code>specie</code> 的 <code>typeName()</code>。返回值依次是：</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&quot;reactingMixture&lt;&quot; + ThermoType::typeName() + &#x27;&gt;&#x27;</span><br><span class="line">sutherland&lt;&quot; + Thermo::typeName() + &#x27;&gt;&#x27;</span><br><span class="line">Thermo::typeName() + &#x27;,&#x27; + Type&lt;thermo&lt;Thermo, Type&gt;&gt;::typeName()</span><br><span class="line">&quot;janaf&lt;&quot; + EquationOfState::typeName() + &#x27;&gt;&#x27;</span><br><span class="line">&quot;sensibleEnthalpy&quot;</span><br><span class="line">&quot;perfectGas&lt;&quot; + word(Specie::typeName_()) + &#x27;&gt;&#x27;</span><br></pre></td></tr></table></figure><p>最底层的 <code>specie</code> 类只有一个 <code>ClassName(&quot;specie&quot;)</code>;<br>我们找到一个文件<code>className.H</code> 中：</p><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">define</span> ClassName(TypeNameString)                             \</span></span><br><span class="line"><span class="meta">	ClassNameNoDebug(TypeNameString);                         \</span></span><br><span class="line"><span class="meta">	static int debug</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> ClassNameNoDebug(TypeNameString)                      \</span></span><br><span class="line"><span class="meta">	static const char* typeName_() &#123; return TypeNameString; &#125; \</span></span><br><span class="line"><span class="meta">	static const ::Foam::word typeName</span></span><br></pre></td></tr></table></figure><p>所以这里的意义就在于用简化版的字符串表示完整的类型。而简化版的字符串则是读取 thermophysicalProperties 之后稍作处理得到的。（在前面的2 参数的 lookupThermo 中）</p><h2 id="makethermophysicsreactionthermos"><a class="markdownIt-Anchor" href="#makethermophysicsreactionthermos"></a> makeThermoPhysicsReactionThermos</h2><p>定义如下：</p><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">define</span> makeThermoPhysicsReactionThermos(BaseThermo,BaseReactionThermo,CThermo,Mixture,ThermoPhys)</span></span><br><span class="line"><span class="comment">// 定义于 makeReactionThermo.H</span></span><br><span class="line">    <span class="built_in">defineThermoPhysicsReactionThermo</span>(BaseReactionThermo,CThermo,Mixture,ThermoPhys);</span><br><span class="line"></span><br><span class="line">    <span class="built_in">addThermoPhysicsThermo</span>(basicThermo, CThermo##Mixture##ThermoPhys);</span><br><span class="line">    <span class="built_in">addThermoPhysicsThermo</span>(fluidThermo, CThermo##Mixture##ThermoPhys);</span><br><span class="line">    <span class="built_in">addThermoPhysicsThermo</span>(BaseThermo, CThermo##Mixture##ThermoPhys);</span><br><span class="line">    <span class="built_in">addThermoPhysicsThermo</span>(BaseReactionThermo, CThermo##Mixture##ThermoPhys)</span><br></pre></td></tr></table></figure><p>调用了上边的 <code>defineThermoPhysicsReactionThermo</code> 用于创建 <code>RTS</code> 中的 <code>typeName</code>，调用了 <code>addThermoPhysicsThermo</code>（位于 <code>makeThermo.H</code>）, 用于写入到 <code>RTS</code> 哈希表。<br><code>makeThermoPhysicsReactionThermos</code> 函数的形参：<code>(BaseThermo,BaseReactionThermo,CThermo,Mixture,ThermoPhys)</code>，这是实例化需要提供的所有信息。<br>比如其中的一种组合：<code>makeThermoPhysicsReactionThermos(psiThermo,psiReactionThermo,hePsiThermo,reactingMixture,gasHThermoPhysics)</code>（所有的组合在 <a target="_blank" rel="external nofollow noopener noreferrer" href="https://github.com/OpenFOAM/OpenFOAM-dev/blob/master/src/thermophysicalModels/reactionThermo/psiReactionThermo/psiReactionThermos.C"><code>psiReactionThermos.C</code></a> 中列出）。</p><p>这里调用 4 个 addThermoPhysicsThermo 函数是为何？假定先分析第一个 addThermoPhysicsThermo 函数：</p><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">define</span> addThermoPhysicsThermo(BaseThermo_,CThermoMixtureThermoPhys_) <span class="comment">//定义于makeThermo.H</span></span></span><br><span class="line">    <span class="built_in">addToRunTimeSelectionTable</span></span><br><span class="line">    (</span><br><span class="line">        BaseThermo_,<span class="comment">//基类名</span></span><br><span class="line">        CThermoMixtureThermoPhys_,<span class="comment">//派生类名</span></span><br><span class="line">        fvMesh</span><br><span class="line">    );</span><br></pre></td></tr></table></figure><p><code>BaseThermo_</code> 是 <code>basicThermo</code>，<code>CThermoMixtureThermoPhys_</code> 是<code>hePsiThermo##reactingMixture##gasHThermoPhysics</code>。</p><p>这里的 <code>addToRunTimeSelectionTable</code> 函数定义于 <code>addToRunTimeSelectionTable.H</code> 中：</p><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">define</span> addToRunTimeSelectionTable(baseType,thisType,argNames)</span></span><br><span class="line">    baseType::add##argNames##ConstructorToTable&lt;thisType&gt;</span><br><span class="line">        add##thisType##argNames##ConstructorTo##baseType##Table_</span><br></pre></td></tr></table></figure><p><code>addfvMeshConstructorToTable</code> 这个类是在 <code>runTimeSelectionTables.H</code> 文件中的 <code>declareRunTimeSelectionTable</code> 宏函数中定义的。</p><p>所以 <code>addThermoPhysicsThermo</code> 中创建了一个 <code>baseType::addfvMeshConstructorToTable&lt;thisType&gt;</code> 类的对象 <code>add##thisType##fvMesh##ConstructorTo##baseType##Table_</code>，而该对象构造时会往哈希表中插入键和值，即派生类的名字和 New 函数，此函数返回指向派生类对象的基类指针。<br>这里的基类 <code>baseType</code> 是 <code>basicThermo</code>，派生类 <code>thisType</code> 是 <code>hePsiThermo##reactingMixture##gasHThermoPhysics</code>，这里是省略版。</p><h1 id="of-8"><a class="markdownIt-Anchor" href="#of-8"></a> OF-8</h1><p>OF-8 去除了 <code>reactingMixture</code> 这个类！<br>它的成员 <code>speciesComposition_</code> 移至 <code>multiComponentMixture</code> 中。<br>另外 <code>multiComponentMixture</code> 还新增了 <code>readSpeciesData</code> 和 <code>readSpeciesComposition</code> 这两个函数，用于初始化 <code>specieThermos_</code> 和 <code>speciesComposition_</code>。</p><p>之前（OF-7）化学反应的信息是保存在 <code>reactingMixture</code> 中，然后复制引用到 <code>StandardChemistryModel</code>中的 <code>reactions_</code><br>现在（OF-8）是直接保存在 <code>StandardChemistryModel</code> 中的 <code>reactions_</code>。</p><p>化学反应的信息在 <code>StandardChemistryModel</code> 中，以前（OF-7）是</p><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="type">const</span> PtrList&lt;Reaction&lt;ThermoType&gt;&gt;&amp; reactions_;</span><br></pre></td></tr></table></figure><p>以前（OF-7）是下面这样，调用的是复制构造函数，因为所有的化学反应的信息都包含在 <code>reactingMixture</code> 中！</p><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="built_in">reactions_</span></span><br><span class="line">(</span><br><span class="line">    <span class="keyword">dynamic_cast</span>&lt;<span class="type">const</span> reactingMixture&lt;ThermoType&gt;&amp;&gt;(<span class="keyword">this</span>-&gt;<span class="built_in">thermo</span>())</span><br><span class="line">)</span><br></pre></td></tr></table></figure><p>现在（OF-8）是</p><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="type">const</span> ReactionList&lt;ThermoType&gt; reactions_;</span><br></pre></td></tr></table></figure><p>现在在 <code>StandardChemistryModel</code> 中是这样构造：</p><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="built_in">reactions_</span></span><br><span class="line">(</span><br><span class="line">    <span class="keyword">dynamic_cast</span>&lt;<span class="type">const</span> multiComponentMixture&lt;ThermoType&gt;&amp;&gt;</span><br><span class="line">    (</span><br><span class="line">        <span class="keyword">this</span>-&gt;<span class="built_in">thermo</span>()</span><br><span class="line">    ).<span class="built_in">species</span>(),</span><br><span class="line">    specieThermo_,</span><br><span class="line">    <span class="keyword">this</span>-&gt;<span class="built_in">mesh</span>(),</span><br><span class="line">    *<span class="keyword">this</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure><p>调用的是这个构造函数：</p><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="comment">//- Construct from thermo list, objectRegistry and dictionary</span></span><br><span class="line"><span class="built_in">ReactionList</span></span><br><span class="line">(</span><br><span class="line">    <span class="type">const</span> speciesTable&amp; species,</span><br><span class="line">    <span class="type">const</span> PtrList&lt;ThermoType&gt;&amp; speciesThermo,</span><br><span class="line">    <span class="type">const</span> objectRegistry&amp; ob,</span><br><span class="line">    <span class="type">const</span> dictionary&amp; dict</span><br><span class="line">);basicThermo</span><br></pre></td></tr></table></figure><p>下图是热物理库部分类的 UML 类图。欲获取更佳阅读体验，可以右键在新标签页打开该图。</p><details><summary>OF-8 UML</summary><img src="http://www.plantuml.com/plantuml/svg/nHjTRnotyTd-5KG427VkoN3oKk2a2h3FakswYWNhK27zW43jyhGRxrUNtBC4Lu3H56cC5crVYhQ6Nmgag54WJH_TjFatafCyzI-K7xktv9BBM-wfRHwSMt8uCvmlpWmf080NGOm1pf0N8l3iEX3_7Hs1_JoSGuA03mcatzNCnjCqzq42OrGFOGz6C0SVQ2Dn6XsYy2GWHnBYFHGVenpCYiGZOPfW2VctFFfD02EnpcaCXe0FBG1An8Tj4n-qJJoM9yxPF-MUjtwwiG4obC-GH-v1F0O7V9n12DdKSrjYQljPnzrW0ade2RBWE4qZ42PU6cSvmZWyZX3u3fZ122FR0fnwGPhJGGrMx2iFqa4s0jEMRT-tJKuos-oETUby02pJ1zb0RAByfg3AT-kwURzr6GvjtFx0BeKzkfi60BUGMlF2IZw42PnD0vJ7wHZi_AI0JEEFPWTKQvAzI51R3I35SlQBuuZgjU5VgWs42G7994Mp6JwY5l3j1HGvov2FPc0tF4N-zq9CjiHkHWlmROg2_hYTv_2iWrjN0exIfqTK507rMlP_QgvncjHWDKx0G2PPISq4G55fynOEvcde0oz0tfC7ILQGktIwwSmRGYerZNNn6m-QobtccMAtKHY7PD1c64mMRU642wXrKaXDczQvbsNO0LoIQ0MDKS9ZoKv20XXbPsu-VXzQPx5rTjQs_mFRidkO-2PrtKNSBi8v0eJw3YWmyi4ipS5tePSUXp0nwC-VPFxKwBfDiGW75Y4VZyU4koSOWodr8oFypPlR9d3-e_Rrvh8j0U1wGl0p5IKeFpbxdvzwpt94YZm1xmJlR9uReHCRNANwAfeAhjQ1sCS8MAFXdJEs4BIl16q6iTDdrRHzMI1MtcegLugmhNfjAag5AFKqulhVDgKzTvlnKSYUf94sLeVg69u-eCPhYdQb5UmQh60HUy5WDif6qrkZWU1oFBwnEvG-_5r_Ad_py3KSIUc27yAJ9CMKArmb38w1KMmfJA8mGSBI0YHiqcHU5aCwWN4C1nqipHPYh3d8FTlaRTkaPmsAWPNjm1eK0wyAYflDAViwPENNAYLanOoikpcnJHfNKWEYMKqOXSTvMCGWHv1RKUcq_XaDJCpwz63zq4RgeLKZ3pthx2cTrIPB4wvW4WOpIWoRuM5tOvkWcEPxa8PJ1AZzpr6EsRPiwGCBNVVB6DKUtl3WFbuA19SZsi63dQKmi1LcjQtw3pr_UdncLuJljHx7ZG0jedR1lYAO-DCS9ZXBSs88t3gGwP1TajRUnYoPTKX3OUILULPSl4kNlZkAY_Ve_zyRDb5J1_0vw40kNddMnk9cLS3u8PSjp6aQntuFtJBLkB09_WdCCgkRqzmaW85HDSSGXzvUUCgjWUk5ZuXIjnndSF0Oavpwkc5QLKHAQCr4SxU6ODTA6vX2LlcM7_LiN10-mMiPTfPj0nPOvdMROMsVv7nsdaO7V5kx8OhyRQdlqAcx8FEnNdrfgIm_JkaGWM625TMA5KotnZM2wu602iqvVRt9zGg-2SZD42DoMqMdpJz8O0j4YxZMMO-amOyDLEDB1c4G0aK4Zr44mYRcPU0TiMkIxqXcYSQelLpyyyyNRtxvzW-VV_N5vr__yUNbBxvy-xk_Amuev4eXEC___jUlCfgfqS_oQAbv3tDImAWwSGx3XWtGXEnM6p2jfRe3ivPF2QsayiOr9CuqXt52KDUHAz5qMLzdVquaiKpFTN6JNvVrTRcy0hzuHNwnExzm5NxXYln2Ptxf6RWIIPVroi6w4bL75Eg1hIvp8sn4eLAk4m3bF1TfG5n499oaSPOcA25I9c2S40qJFLbRrE9LfqMaTKOSMpLaf-IkEhQaPMMi5oCqlRYsKNLAxqCSy3D_IxHBETnEX69AVtlHw-4iuP2b3XoO8cYPCQoeEQkocPep48izTe7vFcioNDER1qfISysuVPQD2brYta3Laq-HWTzbAMXv6BPlKS8cpLcHZYn95lywQlPqHSATvZbD6_UeRUpcegAaEHaNmlACpY28TTKGgZIcwfUfLh9vVlsQcXms9L6XawLWHAcOWzIIanjSZ45Q8Q0eAkrUoOdOU4lQA2_F8F62NUXLFZlW0s5LRWXSCphV0HSZIMrkWOa62XMFAqyQigxCKNK_fZOdsPQiRMufp2Pr2nmg6BX2obAJXZTQZD3oDanyTAeRZxm1sImQ2PdPSdvO0lrOgFhykZasydYgXDWnA7zKON5HNYbWMnAKCIHQd6FDT2YetxHOor1EpfHiESCXBrmh6SUinvqc1uZmkRjXF2eFgO74NLNQYzytAE0U8a7g3vKBlP7yKKfs91j5TLgPq_giPRnPzgvfwSfCsUx_YdziOXxREAUglVpRouj_lBZuucFJoNpnvhElNlxyxOldRr-zQAjObgJXJcdUHBt8hRYkF5h2jTcD_joH_hmhVOTap8c3ihTY8iTz_i4ZALZL_PEwZwKsJiHujux9vMz-HbLx-Sdll_xJQw5um6hFGAHs17ppqPUi3jK5jC2W-7L08-7xyiEDDLKyODewmmdMimTFGoeEu6S-EJBkn7BRiTPqtYXDdnJPetp2UCqBZvGQdytt40xMGKp_hKuEBu3v3NxtrVHujaUM1800tKcBnAVQOAwCwrw72UGE5Ka3pELD1xyVOUfdOjqqtjDngLU1Xr-aDD-uZ81HIukxlGUFqkCFgLZ7uvCyBJAEGwohOQLCeoFLnh4csUPuhAzkq3iQwhUIvIrKZQVIR7cSLahTPvwaHlNPq2WxhYkSHI4HABHzaCNmI7al4MTag8SZES-a8S3a_5nsDTQ1CRmP7lBO0Ai7F6OOoPEQ2INtBadEopewIsCnRgxe4CERpXgW5j6P3-O03Ln3j7eJrYr61uQabLcFI6rnFrpBJnXjjzXDEDXTEBY7SF0L2WVt5mvq4mvq5mxi8HnuXSA1dOLZPDzpIqpOxMFrGk9A-5SHBj_4LBySQD7zLBfnkEBiT1M9zqX6LoANkTBBLYKeNbWu4gsUPKn7oycQdPUdYwtMOKZenGA5tFyXd-_OKaLk1Aj55atMVLZvLTCiAaBVK4T8u-OwWXF6bfGxwtfZskRGcS6XZQQGMM94dOuz3ghyi4d8Hn61TDhbw62FWLqrAruhEUcrVk3KrpyFtGWUzhJQk72ZmzuQz2AK50ERy-86R4zttvdDUdWyMxMAhhWNxonUUHWZ7d6F2pL6FHuIMxIGWa3v9mmuRBwTMGnrQpSqQdww-cYpRJ8kwZcAL8fTeb4XzwOkNxr--zcdegtLjKyb5JGzQXc9CqbExfmvngXDzm3bwC3kpbl_CKDb30jpULm-tJCSCThiCusotfnahvxawn5ZGIcr2QoBrPgKxy1mHncKdNYWzTEr7MWBxgXjEk4orVoMD3i2xLtuZhuK8CLTkZNAs3Ez21Aq9LYRr1T68p6otxW3AeT5uxhyk7dp9hYTd-3j7oNWltSX8F4cNsoDcXngrrOZmInOzDjBAepbTSuyfB-qzdwxP80Y0s0MWk8nZ5-wbyNMs_RImccpvB9jOBDj1vectRSX9AieiRVqnLr6UMdNHI4yKDPjrOa8cSoJzOxGq37tP1VuhFy8bDiQ-TbYUOifnu-gYNQ3124sDD74fdgXLhjq3GAci_3oqxzyyz7hoqy-TZjwz4vQHPD5atFd3fnzzV9MNAVMsR9EIbSaxhbXeB_XT6YbTMfzTUBBiCXT8eRMblPd1TrROPrQLrUWETXJSrxtz8Rtg527bfSRAaUrJh9-EvratNSwcGyQ3HZ7dfPxtTkrvfts4DYyhyJSzjDeUNLlT_NYxh0xdSE1VhJsxdJrwdBrwN1rxsvTmUvQgsktNJCqnlhPhSvNAdg7QhwLD3zp5_L7MOtiwrMxD2YgaCMdhH1P_bU6YpziALZYgLnuowt7yeN9g-UNl_trnPld5s_-shTY5YJE_mC0"></details><h1 id="of-10"><a class="markdownIt-Anchor" href="#of-10"></a> OF-10</h1><details><summary>OF-10 UML</summary><img src="http://www.plantuml.com/plantuml/svg/rHl9RXovzQpw2W86X5PK4ZHp6K3e4M1h95lmU4Qm6X0cbmPLnLOnhYt5whO4fu4SWWH6SWsG6Bdcc4oEaqdoDnfFRlc5SAc5B2vLrPA0n0Uvcs_XutkFRo7PNX13GW39KO0HUEU1wj_Uswm8GGeJD6_7I01ZM81lzA4aYoyHlexA5hGRP2af0UEppHbDTW0VQZ4guaihv1ihvBK2MVE_rIAclzZR0pag5YWedqDo22xuE4SHgss1Km4xUgTDK4JP9FV1p2R02oVqE7U2Jzp4AoVumitxWbC7LdXEi9F-fpqBUsKGJ-Y_LQkmmSzW2XUp21L9TWXEVhw49SxIhnSN9InbQqXeqmwMOXSwW0CnAS1f2TBZ32qMP0u-1v-rQELjZaAq0AVu1eLVOb9EXUH-Wtz4UT0FJui2tcgEF8kpjtEwkeWwC_i_o98aIoM7Rsa1mpdEAwv63ChCWB3AS0Y220Llpj9yMNu1IwZv-PvOPyjhMtmc4wjfOfpWqWvcAxDk9xvUErHeGOVhGiew6O8lQQX69oWb-2f69saPmJY_7RkvNa0tcBZ12wiQBfo4pqaPshKV7kVXpB9lkWiMkqT4Ct9uMFAj0Gx1ZBgscM1__yY4ppz8EwrBDnKOXbrsbMKnG1NQP4U3y-o0KbHSttx5GxiP8-t2QWEk9i8LX03RGCZi0wTbJYR0JWMipckdYmJfWMuIAIPPhQ5fLqMfbEjpiqagtgiKL6RnN1jieri2RyvALEYfTWOc2p_tPmV-H4nqUFYJqntfItWQpkJlF2xi-88rDso8uNMQ4JeXeS5p0ME2TEq9WN0QunJr-aE5neqUeQ_iPdSP-1ecIS_UTIVEvqxeKoSqS0ULo2rOv0ugKM0DAZs4o2sqMw78pHovrtJjXBffNxgXRbs_3DpW6mhMePKBraWfG_9J3Qr4IHxJqcAwpu9cJIIykDvXId1YsxS96G9GuItKhxdwbMxGKqOBJdss8_b7zi7_akr7_fNlpBwDQGneBmoHIyKXanUa5mdsCpeXavDU7DYB4xuCmjdLROzfmy2H9JiHM8Jb9ViMmpIS5J0bULQKfiYiO-cfhuwlJmch-_Hw3SP1LQSaoqyenYT-iloK_l_fZiQYG33ak1Ev1-9b3mkDVXNcGnomMXSMj0vYdtLJ9qkdkjx0F8SMTOcLNq62WrVufbmMSdVNLCaANFxIr1eSNOPCDE7hzInMhn29cgzyrJllrf9GodJSW7n4D67LU5Tw1TWkuOcisZo2X6UTrcfFAd-PGLhmrCuZWNcgeYg0oxWKKqZ065wXM8MUfI6waL2IPSavynQ3RTuZ0Ab6LZARyxBWu5KMNt2BdM8KXqTo0_r4E5TM5BHpUaKNVLf0hbWY9r35N8f274Qhef6aXktwcvwDUFYXOoN4T6g1nXIg8HfKO-4cr57nmfPUe5NVTasWON8L4LG-LHdg26SfjA5mYKWMKw1OWKqiYysssLb4LtWNhhu86OUXO8sV2QUVZsIiVeQzbiNCpoSMScosJPeL2OmnaOk--HpS_UFFTz_zzkCVlltn-s___SSFF_pcNnz__pSAaEAOC0AWE7ps__ppTpajSEdNAelgPqNOwb1j0zU3mOvsAXHBnr4ckRPf-wdQzdGyzrwYjWBkPqvapeCekkBq4hNDz5Xno2RYa87YmD7Ym4t4WSF4eUbxFFDU8YNvZ-VVGoSbQZNHy7ITqA2FZxCaprBQ3SePsmWH1nDwzTMqpqt6uiKHfjDHsdjougM3KPnfYoeNVdKObw1LUX0Zj6pOsjhZAE90aSDEOfHGraSrBf-CO9wxEO69BQiCXLe9F_RJ2q5HtNx1oi7AAiwv9OQI04w-lgCmuD_cbbnjMD2sggY9hIlJ6ogPhXkmjxRawa1TyhQkRbEyNtjRlIx5FLfnyaFGhQI4Dob8Kmb7TYDrevqNMOwAKZfXNXY7QPwqfaTBekYFQXH9xaMhz3sZknsMGOI7PQJLa8bMzvz81AJ-kQfknyYOQl67ltwu-_lxk-z_RGfUTz_zvSSFl_hu_fSV__JUfEwrvtdii9BaCAXgQk6QmhxmYfIiBjSXJI_1N1L4w5csJ4EwuPXpo2My2USPRLgwUChnAMzhQe_XXshTEpMbrshRe1tBjOaaFZjwpzuiyse7rXtSELElKlJb2xDqV34aZt4fM6ZobSsmBr_Q97cfC-GR_HpYOifeQLnhYPjjIopSvKO05-KInjLgpxwM0s0kz2XrF-1pSA3JEgYC-4O3cASOQ5HpaRsY5NO8ongTEYHEhsdJbDVdJgBVlWUjcq-rNBbVjQc4hxCra5lVl3F3QK3DN232xoU6490iYB821sxSYxUO-ZC8yx1q8zeg_buYqgKG-AAPKeBLg8aFt3DtExC8kTtJY3zIgWXPsiBQYRhZi_-5AOYHVoTTIJPZaMWR12YEoOFptjGV8ZBPXEPnLKaUKPNayLG99vlGFAuguIEg4ZwUAeFngcHt5vQ8v8_KyS4uHT2PMooJJYBVfAY31x52k-onKmunZbb1RQCmYcgr2PLImeyXd8rBSpDRbXlS0MtWzuCQdWVOJ-nwVAGm-UD90sDQg0uf4uY9gby0rd597JPESj7Wy-TV8wvvLBd1p0xYJYg1fTfmlcaBCQPz6Daw32fcH--pGNjiesrlATJP0LN5SUrHeqijwBxqMReDh82gHtYoNdkHUwPPn4iSLa3fixV2961dIhTkjFQWG1hj71He4AVEyt7LUzuNDTiMxNNJaNIPX2Wk8GMFcvdWyKbVlEiP5qW4pMC5jykHqbm-H5UNB4VEIWaUODfqQT-XsfIfOyfXq_6OSD8yVUWuq3W5T7WfVi0pJVbWcSugSJNH1cdmleAlXwH7ROFE1qMRqP6c3U2MgAY7J2qcjt6JXX5ZrEoCtoUg_TyVyJnW07wSoBE1VpBnxGLQifoFjjfzBJRUMXjOQgoLxcaXpJf1TLScFP-QpuyPQh4CogmWpIt8shszc_svttpo36DTv6uai5TkNSf6SiyUMUmqDWdi54gKubE-Hk8zbhtACs6eTR1s7xNTc0JpdrKu0a0_yVXTQJ4--sjOaT1MnuRh0Nb0PRDl6FEyRbfmgji25qkwG37IrxEn8iRk7Fu3gAvy5jMvjan7QTg8Dr2rmnaEsOuT9gEsfPMsTtkwP-r0DvZzdXmyp_129ghUD03rBO63ZqRthBM79zom1auba0_qTmZTZ1fL9oNTyUFSChuoZYkF5fwmyyyBLAg3F07PaGKpTdxg7EOrNdj1VYogFHRcz0iiKU6r6P9gWKKIMIk7XztNiPtOwHa2xaQCfCJRTmlg3Rtzz0RSUdhDmmVvEAHwxc1wwB1hkWdq74z6euuy0zwa37bEickv_ki-HzirtRFDwcSFbbDv9wLUAkswxzoSE0Fa9OvP3PW3LsQ_s7BY390NRgnVE4Q_GR-yxDh4z1kzNUC5IuGOtcQYo_H3J4KzVg1HgT_F_268uiHhADTyDKBNqis27UboufxoigVX6FYsQ_Yxhjq1rn8MbhtN43qIzvrVkLR2QAip7Z1cKItTWBNP9rbxJILHrHNdJQjchbSQ-FYIHIRbfKaxLrsuD2DJ5S5KlhI_j5god-XLYMc352S_KVBuJLDYVm7QzqxKgri1Dvh-kBZvsKuBgUg1xYjJ8sRznBcBl5V_z4ZZ1HBnUIudT0rB1CIPFAni50PLVTRAI5Hzj7MpSnFUgHntBYY1SGB3YYjXEv1XyXhPjIAxU3wwrBvLfyhGmoxBtro0zNy1"></details><h1 id="of-11"><a class="markdownIt-Anchor" href="#of-11"></a> OF-1.1</h1><details><summary>OF-1.1 UML</summary><img src="http://www.plantuml.com/plantuml/svg/xLdTRzGu47_Vly82QPKjktk55wHjRoLkeL1HGA8vdNfLLRc9b-HmFYvsbgBI_nr_9hRZf1iEtgulJSRpcndFbyVPoIJ2a110IXIbw6u2sD-JBqKLWnncwFf84aW4CQn0_gx0Y3Z4hC1_eVHJGXdzVZAHWi3njyK2bAZQeeY-XaHfQGbAKvhZD4T0YQgI8b2FvLmJmnc8YfpG8n-Y9Eb8nDz3_Cn-llUpb52v0xaR4i8RZ2nFITBTPF46aaGy7sDuW_1QhP_cSHe9NorsHHe3WgWY1REZYRRffYWmrqrXcfD0606u0LCbvJsBWNSp9cl1l0ffKLrUAGd242zCh7G1GeuDs5OfocDmIcY5ODOgMQy3JPjRhfZEXFl-WJdSXWcgiW8iwdBnRMq47Qm0-hU6D2to3zjp2gdsgO4wTZZMAbC8UqaZjV4qfo3V56Yx9TVWT_1S6Ks_bYX6MntNY3Eyg2huzVBvbMHPw93Zuilr78G9Irp-FogohCXLPYzQ8E0CcrAfwYupCUwgShM8UfIWw7EelEpDpeKLq5RoL3wJ8QoJsL4vWZaPmTjhH5FkTi3D75W1AXwiub6HbYigm0ihm4eLBR1sQoV-6RmzfQXotAvjr5M-dMlAeNuAJ2DMguEJcRK_jRi-xlWa3hs0mT3iHhZx4ymoE88VZP4zWdUC3PinkRSPuuqt8tZFH_2-6i7xUWJlYn6yRyVmZl7mssWCywt3FBUBi1m4voxOnjgl-P2eq0dr6yUEy70GxGJqLJ-QjwsQDnyCypYiO4xAegAwUraTpMrVNPZRnLGM47Qe4D-9076qyNJsh7xg6lnqxd0ySpcUpRokoEeHqVyCot9CfKDS9d3WG3ZzmAOSVdx3wgkSeMuWIIFfpmcyOSC3ZAX9lECZ4ZuNiavIX6DGoh79eeKU6fl-FDIizX25sPpUp7V97qMTnypAa4qDOYgJarf3tnHLXSHM0blO52JNV8ZZG3wX1O-CtJpYAp5Y-LAXZtKUfXawHrZAaMFaarrQqHfYbH1IIp1ZSymXWxggoc1sLo5QLpbto_taYNIzXqq6mMPkLJaRO5BpWfvc9KOPoYcAhKsiLeo1xKJ9ij6hLLvZp1ncoFSRbJH6FQHBietHIBFocBGiQsUYKHReTYG6NnvsDbSXZ4cVNSlbiZN2LH6y__FixByQ0Kf8eoJzIGQu7aSFnHNzZBYY_UAwfow_Zj1Dw50aD7U9pReMryPEzX_mg-60VB7iW7Wx6OgkC-Ny-l3wThifz_D-opUsh3eQTtjgt8tHw0yBExkSgF1stiikJoC7eNgziIjnpsQNrbYtMNPGsKVHk_IMOTc5tktgQa6qTQjn2t7IglR4cxRoJRJw7CAU565YF3U3XsScMG7fN6wK_eRI8e_RHJP_BDeta4a6Tk0rbs9ZbJQFrYbcI1RRbPjhSR9tAWxFjuOcObhvlK-6A90J626FeFb-GeVyBtoVE5yW36UlW7eIBZNoLyP88PMlrTkn0T63dZDV9FeUsanvDOOK1Nf2QxsSj7E2M37pXD_wix8WgPWwceF_W2OfOHiN_7BB0oZRRnRMdZYEDB4x6oXmScrhxJ_WEu2VSZuV_R0ikm_toUbhw60VIVsDUOXfvp0PhKcaxYIhCKqtFA0vQx9M0s5iBD7pJxg9o2Hrg7T6g8Tgf9lwJEbDJSIWwaphdIMfv75F4PZPxYARl1-SaUKMcY54Y-X9UD5o7OZydFO0KB8Py5zI2aFpFczMhejKE7JJaR6mNtLdSsBlT3VLn2oalvSzrBCi4Kq87_BlGF_QBpJ-9kPrvz7_RSUf0RUpc5_hmG7Bi4uCLC9qwAhQBG7gHLNyuv9Mt8yTwovqI-XXc8ABDaykd1eRmjW9qYBTkhmmvmkG6hekqwlXadQXhaf3G1-qysEEWTOUl6oNh_QqgESteds5Z_ZPIOlKyfODp63LSlKtzmevNxUsrFbqHMYHHX_vxppkc0TlWoq52n0yNHwoVriw-wrbdeF3vU7C737SV3DqkyvZHkYZa5rV24jl54k6wO_Qizn1NBE6sTZ5ognJFTvsxZ_bbtMvtECYu0Vp8-701rPbxKNPLmXn6kYgCrPq-5z22lMWczLKD0BlhKFzJjQvFt1ALKVql9NNdK_K_UGbeyoigLhs-dTiCoTyB67if6tymzSSewZskD08kjDxnzraLFkspeOjO_KAzNXyQheyy1UZZCRzVlFUTm00"></details><p>reactingFoam</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">autoPtr&lt;hCombustionThermo&gt; thermo</span><br><span class="line">(</span><br><span class="line">    hCombustionThermo::New(mesh)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">combustionMixture&amp; composition = thermo-&gt;composition();</span><br></pre></td></tr></table></figure><p>CASE/constant/thermodynamicProperties</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">thermoType hMixtureThermo&lt;reactingMixture&gt;;</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">typedef sutherlandTransport&lt;specieThermo&lt;janafThermo&lt;perfectGas&gt; &gt; &gt;</span><br><span class="line">    reactionThermo;</span><br></pre></td></tr></table></figure><h1 id="of-12"><a class="markdownIt-Anchor" href="#of-12"></a> OF-1.2</h1><details><summary>OF-1.2 UML</summary><img src="http://www.plantuml.com/plantuml/svg/bP8zReGm48Lxdy9r9FO0AqIpHHGfqHRX0WPCS0Isunybgspk7l0CmSOqwUpdcMyUyo2a7Pcrr6hU2lxzGmY18otlHK4rDprltIEpMBS9eVQTITRN0pUJehJmkhXNKGazK_xXcHDANljNnnn7IjHMxYggo0E2aHlFEbCN3ebx1C8BSlno6vdiQiEarSgu5PUCsFFojWGBLGspedqHNyuRs9oU3tYd9wzFrH5edWL3wvlc96RWoZV8klDDARTMS4AUhfreb_qnSmD0GDRnvqHAQ1hInSQspnHFcpii3kmXuUAjZ5g2gqzbkcTX7VJ0ectDcf4dUO4KvGq2VPYRMZKrtYxVbUuYqqFxv4SdBchIIdBf_Xb1XWJRXqnqSVYMPNFiAi0DPtDeyYt5xjG0oIEu_FbDmzZh4FMQJPBuRj0kzOo4WnFKEZKHip_X5m00"></details><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">typedef sutherlandTransport&lt;specieThermo&lt;janafThermo&lt;perfectGas&gt; &gt; &gt;</span><br><span class="line">            reactionThermo;</span><br></pre></td></tr></table></figure><p>reactingFoam:</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">autoPtr&lt;hCombustionThermo&gt; thermo</span><br><span class="line">(</span><br><span class="line">    hCombustionThermo::New(mesh)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">combustionMixture&amp; composition = thermo-&gt;composition();</span><br><span class="line">PtrList&lt;volScalarField&gt;&amp; Y = composition.Y();</span><br></pre></td></tr></table></figure><p>CASE/constant/thermophysicalProperties:</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">thermoType hMixtureThermo&lt;reactingMixture&gt;;</span><br></pre></td></tr></table></figure><h1 id="of-13"><a class="markdownIt-Anchor" href="#of-13"></a> OF-1.3</h1><details><summary>OF-1.3 UML</summary><img src="http://www.plantuml.com/plantuml/svg/bP8zReGm48Lxdy9r9FO0AqIpHHGfqHRX0WPCS0Isunybgspk7l0CmSOqwUpdcMyUyo2a7Pcrr6hU2lxzGmY18otlHK4rDprltIEpMBS9eVQTITRN0pUJehJmkhXNKGazK_xXcHDANljNnnn7IjHMxYggo0E2aHlFEbCN3ebx1C8BSlno6vdiQiEarSgu5PUCsFFojWGBLGspedqHNyuRs9oU3tYd9wzFrH5edWL3wvlc96RWoZV8klDDARTMS4AUhfreb_qnSmD0GDRnvqHAQ1hInSQspnHFcpii3kmXuUAjZ5g2gqzbkcTX7VJ0ectDcf4dUO4KvGq2VPYRMZKrtYxVbUuYqqFxv4SdBchIIdBf_Xb1XWJRXqnqSVYMPNFiAi0DPtDeyYt5xjG0oIEu_FbDmzZh4FMQJPBuRj0kzOo4WnFKEZKHip_X5m00"></details><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">typedef sutherlandTransport&lt;specieThermo&lt;janafThermo&lt;perfectGas&gt; &gt; &gt;</span><br><span class="line">            reactionThermo;</span><br></pre></td></tr></table></figure><p>reactingFoam:</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">autoPtr&lt;hCombustionThermo&gt; thermo</span><br><span class="line">(</span><br><span class="line">    hCombustionThermo::New(mesh)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">combustionMixture&amp; composition = thermo-&gt;composition();</span><br><span class="line">PtrList&lt;volScalarField&gt;&amp; Y = composition.Y();</span><br></pre></td></tr></table></figure><p>CASE/constant/thermophysicalProperties:</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">thermoType hMixtureThermo&lt;reactingMixture&gt;;</span><br></pre></td></tr></table></figure><h1 id="of-14"><a class="markdownIt-Anchor" href="#of-14"></a> OF-1.4</h1><details><summary>OF-1.4 UML</summary><img src="http://www.plantuml.com/plantuml/svg/bPCzReGm48LxJk4w4dk05QBP8egKQ8jm0MDCS0Isunybgspk7h27CCOqwSnZvfl76rCyNJl1d52IcXkfxcL9Mce5QmPk9bMmaLgBbU-Vei3gY_Xotl0WVohJFGlh8iPgpWIt3Mr73XrOGg0e1o4U8q1pqtFc7gc5kaq8jUzKqZww8gJqkhpNg8IS2V_mTFcoQ__gg5jDeBPgLr4Z3m06Bfvr9Ww7Wykh-0OuVdaQgUmQGwNLohWLbupOy_As1Aldk25rSlBwL1zrpD18RswQ5tXJaEq6MSFTb6fhZIE7D0piu4pWj0s2uZ1dIEuHF5Me1KSUBmPvcFkOcbflbzMaBZCzj4z-TEAY9gqab-wVuMJ8wFoG2IuEtsMf7RiASCFf_C_9jnIxKmCaJ_JovpVDTg_7pQrH9mlS3TejCIF1u0IrJat4RB6_"></details><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">typedef sutherlandTransport&lt;specieThermo&lt;janafThermo&lt;perfectGas&gt; &gt; &gt;</span><br><span class="line">            reactionThermo;</span><br></pre></td></tr></table></figure><p>reactingFoam:</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">autoPtr&lt;hCombustionThermo&gt; thermo</span><br><span class="line">(</span><br><span class="line">    hCombustionThermo::New(mesh)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">combustionMixture&amp; composition = thermo-&gt;composition();</span><br><span class="line">PtrList&lt;volScalarField&gt;&amp; Y = composition.Y();</span><br></pre></td></tr></table></figure><p>CASE/constant/thermophysicalProperties:</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">thermoType hMixtureThermo&lt;reactingMixture&gt;;</span><br></pre></td></tr></table></figure><h1 id="of-15"><a class="markdownIt-Anchor" href="#of-15"></a> OF-1.5</h1><details><summary>OF-1.5 UML</summary><img src="http://www.plantuml.com/plantuml/svg/bPCzReGm48LxJk4w4dk05QBP8egKQ8jm0MDCS0Isunybgspk7h27CCOqwSnZvfl76rCyNJl1d52IcXkfxcL9Mce5QmPk9bMmaLgBbU-Vei3gY_Xotl0WVohJFGlh8iPgpWIt3Mr73XrOGg0e1o4U8q1pqtFc7gc5kaq8jUzKqZww8gJqkhpNg8IS2V_mTFcoQ__gg5jDeBPgLr4Z3m06Bfvr9Ww7Wykh-0OuVdaQgUmQGwNLohWLbupOy_As1Aldk25rSlBwL1zrpD18RswQ5tXJaEq6MSFTb6fhZIE7D0piu4pWj0s2uZ1dIEuHF5Me1KSUBmPvcFkOcbflbzMaBZCzj4z-TEAY9gqab-wVuMJ8wFoG2IuEtsMf7RiASCFf_C_9jnIxKmCaJ_JovpVDTg_7pQrH9mlS3TejCIF1u0IrJat4RB6_"></details><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">typedef sutherlandTransport&lt;specieThermo&lt;janafThermo&lt;perfectGas&gt; &gt; &gt;</span><br><span class="line">            reactionThermo;</span><br></pre></td></tr></table></figure><p>reactingFoam:</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">autoPtr&lt;hCombustionThermo&gt; thermo</span><br><span class="line">(</span><br><span class="line">    hCombustionThermo::New(mesh)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">combustionMixture&amp; composition = thermo-&gt;composition();</span><br><span class="line">PtrList&lt;volScalarField&gt;&amp; Y = composition.Y();</span><br></pre></td></tr></table></figure><p>CASE/constant/thermophysicalProperties:</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">thermoType hMixtureThermo&lt;reactingMixture&gt;;</span><br></pre></td></tr></table></figure><p>OF1.2到OF1.5继承关系没有发生任何变化。</p><h1 id="of-16"><a class="markdownIt-Anchor" href="#of-16"></a> OF-1.6</h1><details><summary>OF-1.6 UML</summary><img src="http://www.plantuml.com/plantuml/svg/bPFRJeGm48Rl-nIzDc4VO4EuySAOQDP4Ng10aHfekpr4DwxlBhI5dbYZTvs_Cz_yCmK0FfZedeXKiBmM1PGSjmJB6ZKZ1ks8f8oahsy08ja8zcW178iUj-e1IPVd1PFxZYZgwm6BYK5OQ5vSgo057Y4-QwG8ewV-LI6rcWZAoYIZ2ZmuiEE6lOvGcKFatW7jZUFe9HeHxMg1gEHCg1KNjKXvULc4jLaDagHz9fzA2xivFXzS30-Q7wezqDpBDgql78EGuLRk8UlElLBwKki4RCkoJmhlPeI5wb6HUpPnHZ5LCV5sWe5EUpV_csYNOEQRVl6rUvVDFDs62unQHUZRYatYlyvWtIJ5-UuVJnrfbsyNYOljRuQlmqyfK4nH40SbBvBaLPje2eSjt7wqu7CxGdVoR-3pJPyXxU65CgYjlCiKCA-yqNAPD-Qa-cPtnKQkqoU9dMSmRpwY1JD4UZRA3m00"></details><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">typedef sutherlandTransport&lt;specieThermo&lt;janafThermo&lt;perfectGas&gt; &gt; &gt;</span><br><span class="line">    gasThermoPhysics;</span><br></pre></td></tr></table></figure><p>reactingFoam:</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">autoPtr&lt;psiChemistryModel&gt; pChemistry</span><br><span class="line">(</span><br><span class="line">    psiChemistryModel::New(mesh)</span><br><span class="line">);</span><br><span class="line">psiChemistryModel&amp; chemistry = pChemistry();</span><br><span class="line"></span><br><span class="line">hCombustionThermo&amp; thermo = chemistry.thermo();</span><br><span class="line"></span><br><span class="line">basicMultiComponentMixture&amp; composition = thermo.composition();</span><br><span class="line">PtrList&lt;volScalarField&gt;&amp; Y = composition.Y();</span><br></pre></td></tr></table></figure><p>CASE/constant/thermophysicalProperties:</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">thermoType      hPsiMixtureThermo&lt;reactingMixture&lt;gasThermoPhysics&gt;&gt;;</span><br></pre></td></tr></table></figure><h1 id="of-170"><a class="markdownIt-Anchor" href="#of-170"></a> OF-1.7.0</h1><details><summary>OF-1.7.0 UML</summary><img src="http://www.plantuml.com/plantuml/svg/bPFFJeGm4CRlF4NF9km34CB5Wp5nioRo0WMAMmEbzazqu_hkGblej6MDtc1cljzyp0pPuwcZhQ8Jm-A2ockUemPBsjPd8iOfQmSi9OnyVMTP1jw1v5dILBK5ZH0aZlHJQK5C-6CItHELoi8a9oqbiiRDG9m2XW38Xat0Fbe09w8dhNh0qjNvWAbzmmptpZxADS-l5IX11IBl6YyZEVKl2glL192LKKK5F3Ymuy9U1L9mFh2yj1d7qSlRW5bN2ymaduHQSK6Bc9VA0YoVn-scZWwQ7weznGorzFh2IGOtvMRh8UjmVQJqKjloBBVzRuC6BWhaddmpNs_Q0O1h1o8bKCCDs3j1T-jX7lMWwFqqyeaHfaBtjmiCSDpB_6zwkmJpSUClldPpoNp7st11yFnRizSL6xt_zHkicqYS-DXVtMoiqNBvJQ8DnWb_A-j6WvE9hOTda-B0wGGyU4518Zca7m00"></details><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">typedef sutherlandTransport&lt;specieThermo&lt;janafThermo&lt;perfectGas&gt; &gt; &gt;</span><br><span class="line">    gasThermoPhysics;</span><br></pre></td></tr></table></figure><p>reactingFoam:</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">autoPtr&lt;psiChemistryModel&gt; pChemistry</span><br><span class="line">(</span><br><span class="line">    psiChemistryModel::New(mesh)</span><br><span class="line">);</span><br><span class="line">psiChemistryModel&amp; chemistry = pChemistry();</span><br><span class="line"></span><br><span class="line">hsCombustionThermo&amp; thermo = chemistry.thermo();</span><br><span class="line"></span><br><span class="line">basicMultiComponentMixture&amp; composition = thermo.composition();</span><br><span class="line">PtrList&lt;volScalarField&gt;&amp; Y = composition.Y();</span><br></pre></td></tr></table></figure><p>CASE/constant/thermophysicalProperties:</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">thermoType hsPsiMixtureThermo&lt;reactingMixture&lt;gasThermoPhysics&gt;&gt;;</span><br></pre></td></tr></table></figure><h1 id="of-20x"><a class="markdownIt-Anchor" href="#of-20x"></a> OF-2.0.x</h1><details><summary>OF-2.0.x UML</summary><img src="http://www.plantuml.com/plantuml/svg/xLjjRzis4FwUNq6qW26dyj3jou0q3f1bIHDiRel4GD4DGy18TCLDRnEfj5sM_VQ98YcH52MBjh9XmFgXTScxX-JnU2_KyU3gROW3YhCK5b_0yP-B1RY310Vh21L9TW3l22rWGDN6XmDG_Rcz1U-AZAA0eX24aCAgfUvuVf_5Dm6CON61KHo2lAUPO7l7sjwSbFPs6ESHlErEQOMIErI0YpAjLqUQwNtAYl17J2Y8lilADAoMlVwI8-BD9JmEswwph2XG3U3fuyv0D3VmK3yU6e67ECCBnlq69iXxfiZycUXKchoWMXK5c_iL8j5CzD_ZWfOm1d-fX4PVFQE0JyIRWoLu-Seaq6UMUtE3WWzjeUCz1ZLDycETzWGKKIQfBJFemIUuPuJEteoSSJGmOw9EDnBI9YhtskUDCRn3CLE16GXG79F9C44EQH3XaMicOnTDHg-QFCMooNxhjcbJ58nK33HIHcYiYD0JI0Zj9o3xYjPZLtIMJxy_P_deqU-VOFHxpqLIIUb4NZkW7ewxB8j1WM38rExnu2288I7SbxuZM7Mdp_L68GIzSIPrrt0H3S4pIH2YQgG2NPVf6YVe1iNSvwpXNOmyMDBi7IrydTVdZiJNtGf8gh_dlbV_8z6jKvL-ID0G2YaEW1ZhM6Sv0M_G9pkVxi3QGUPkFkMXGBGiqYhuEAozngj79dx5AIgXJZE8kZtgtlmlxntbBVwGabQWCKp3TG5JacS51OioN_nv0aYE0ep4bXm1RHyiRCTYFNnV5jn6W5DowuCrkULJNk0qnYaIOGwCWxCCRJQwqwdE-DS-q5hMN_i6nJScnJTIA684omJ5AEAy0gfZdXBz_skoB-8JhuF5jhE6lKlMgfy5ugfA7H1C1cauSfk1pEhVnloaKbi0Ja0GPwdfhUMwz3DXPMS7GquKuCv-Z4GOjOncGtHLNDldpZj_WtaE7UYvCngYhu_5fm9JvBsLwyw87TEouI3BKG5fLYozxLgnAJ1AGnj90_C2o3CzWETFCjJYdnlgi3DKlHVJW2-NqowaLGCnmF5nEu3i78PZjbupvSAy_mfJkEcnxWgvQTRvgTEqc6QnjEzQDqufIE3dAueAm_vBzVV4ZuqlMrxANvuwYQEZmukvjbtYKFHHXnVXseaXnWccLWxxyLEu3Iz0yiQegaGTYzj5s6QZkXor3m1f5VuqZa0XcjcDN73lOBG-mYHnCNB8XPQuJCJ5qZhG6YdL5c8NqLswqBg8uZBmXhfl7A3E7MXVEz2UEj3-u4Bhibi_12x4dmrY8pBB1vbJarddrV-R3a6j3RMvD2F4byFSXY9T4ZT-Go7Ejt0xH2mrQHDQD27AWBtIE1RE78TBtPmRNbnrYVqHZpgOFp218TJ5aw3sn360x0feYLqSv-aKhHWuLPYYHYGYIAbmDbM-_XgIAaOv_xs4p46-tTnKOGOImOh2TMnGYA3bHISgINdUUGkMu5kn1FebHo7QW0ly6TNV3CJTbzyGL_aC-t5Q5F3BAot9NSVP9vRcHlXZnFuDiYJ9KXdpj5o04Ppb0g_RNS6OlJnJZb3msrMQb_HxI8txB1bIySMrO3F-UvHVKKGeo0r1Lb6DaToo9HijR7564nU4tvsRAWXBjo88gMBg7CrOgZl_BQ5Kbq7BffNkdXYg3XSTl4lWuhSY5rgNm24Q3Xp8LCcftTGFIDLkwMqCmjAefa8ntkRvjm3vEs4ldX3xi1TRoqmTKPardsJALgFUGJQiku77Sb35b3FZBkyNXHLlUnyqpMZRDP-afbaAYMaOEjnRx4A7lfjWjIIpdgkmbiBb1apbShhuCXbTxhlOBN4Jeuuo8Um6sOtZfwtqUrkM_Zsn6vQHz3q1f20LnqDHwsPUtM7yRGFteoqcHJkq1ukxG2sNBZFhjoQjxR0UCMOxr6ifSH75JcPzC6_rM2nTPJ4YHcEInUzH5N9GynwgHjH5mW6ClAS1CBxfQ4JNrmETxmWD1xhNRRTjReeTiarsUAxMnN8pEXyt9h0o2MhxpTOuEsIED1YVl1_ivQ8O9BdsfZ4yoq4X3YMwBYdk_hQ9utJiae3lsTL1YCN-4Be5sWLXkHmr2mUBqtBMNqQJCgRuB4loodcdT8K_qx90CYMjFyQkR1G3V2VMhmRosfrzmnOspWeXJ5xbxUl4j6MIGHHXUQ6qRKb9sRTj1Hia7ATDETiBQzO_us8eoe3Uj7YM4qnhbk_RSxnG2zPMrG8kM4KYg-cJNwaNrXK9R6kVkhvcCsLwhYoADZy5pT18oYhyrkZm-XykGrP482tf9IHH9UswHa2RZdPjmOJaMx_SZvq96FxkRuUPFpnoEiiseZZMH-DLEQpTAChfCjUbEnSmG3O4NjUZbVfiAb8hg4LFPwgYceK9cWu_AgQvhixfICqKasx_rHbou2jx_K_ZL5mvcYy66ejvKJeCSRytnEN-26H_YC1PUZTx3tg-DyBhlH5EzqPeIWrsXr0B47P7KSiIng4m7waNdw_wlTPpSRfhMogFkd14pwMbCAkNFjogvLMhoUpwO87LQeorLLVJ6BKUWzOOCn7DzAns1Zvurh1uYDuUe-hLZn-qNSNMCRRnk8p3m_XMwau3TfXj8zSrcrKxXJWbBeoopg0mlpblgA7cX6Ouk6QNMrOWMwsTWcgkRYElpKESe9HKcef2JZ3h7SdLhrbgz4Vujduk9_ys07C_2SpbD2Xa6fXW9udUJ3Bu-IGehoT1EPq4nSa7ziEu-i5-95TVo94UzGigxXouzvDfIrGb52XyBvyZgOGrVnNfLdui_IXpng_A_AiHEQF9fbNkSlW-6cjk8TPXiAY1l4X53GeXCgDrfYM9vkL93_6eJCy-l4DcPG8qNdv4tY4K0_-1JByl7VOruacmbgcV71rn7XaLsAZQMmhmyo_0yCLZXv4GF__YORMwlgaWvmNs4Qcs_wuaTJMyyQIms_TWVU4NoL1EgSFlyhhLudVv7UhnkyoZQlAxR0Dr-UDucK1qVbyDM5gTxYYdPGqcJN_0okvogXQ2wuUCyzu7VECH-cocxUsQL56c5uzZdxffJDlVGxBqeoiYgTELaejr29tkDaaJQ5h68o39slkuBlUnGYJDOVEUeOmXRTwnBRhCGY6se5eU4tKvdhKgtpDAd_6pCEoiNtBl3cc4YRbxEsdQ8AAk3_kyFlplFAZyzru0ca_a_WO0"></details><p><code>reactingMixture</code> 的模板是 <code>gasThermoPhysics</code>，所以UML图中仍旧写的是 <code>sutherlandTransport</code></p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">typedef sutherlandTransport&lt;specieThermo&lt;janafThermo&lt;perfectGas&gt; &gt; &gt; gasThermoPhysics;</span><br></pre></td></tr></table></figure><p>reactingFoam:</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">autoPtr&lt;psiChemistryModel&gt; pChemistry</span><br><span class="line">(</span><br><span class="line">    psiChemistryModel::New(mesh)</span><br><span class="line">);</span><br><span class="line">psiChemistryModel&amp; chemistry = pChemistry();</span><br><span class="line"></span><br><span class="line">hsCombustionThermo&amp; thermo = chemistry.thermo();</span><br><span class="line">basicMultiComponentMixture&amp; composition = thermo.composition();</span><br></pre></td></tr></table></figure><p>CASE/constant/thermophysicalProperties:</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">thermoType hsPsiMixtureThermo&lt;reactingMixture&lt;gasThermoPhysics&gt;&gt;;</span><br></pre></td></tr></table></figure><h1 id="of-23x"><a class="markdownIt-Anchor" href="#of-23x"></a> OF-2.3.x</h1><details><summary>OF-2.3.x UML</summary><img src="http://www.plantuml.com/plantuml/svg/jLjRRnot5NxNho0KO3rhZIpRVIYmK0J86ybM5DM2jAYH6ig2ckLg9ffRXhDhgwg0e2dQzANjIz7Mo4k103KAfEcZMo3_ndAIVr5UPqWEvoQxUN2yv7SkF3pdy1mExOKGOu1Jv0K8J-1fY2vNyeiKpT0S-13xQFOaoMOV1JZNG2jNAokUGWekLm3vR_qP0OCOHcZAVsCFXZ03yK4I8goFHKdu10LdVZu56nlWwVdPnZaPEc6OjJ7b_JF2nrdb0bQ7V0BdC0yyu2KnrOXpEZfY73xSS2W7i3yygSSUudp6q8Um0JMHg7q1uhDqTGEsF6V82GGBJlL4ZbeM5CHX42EWsSFAv4XZyk46OIELM2R133pBWXmvZt6U8HWDG88b4x8ZOYysVxM-3bAKpP6NFuHu18xPkDYmScAJZszTQePWMqXTW9b_U9cXV975O5MXMmLh3EPm1gEHX4-TuP3CtTgwTMKnxcb2TYU8lIHACuHnGFm8l0_cCCIe5eqJpqyoCgW3kQqoFt5ITo8D9bLDDvpS3_3w5h7bxSdmIcv7zCbFJZJw50Ss-djtxbeu464RANYAFxbF6DtN6Vr2PIEvCB4wRfmUZ9SMR26iSEGpq7dNoutXE_yfZE5yugCiIaPWvxC5iMaIFvuV4-DA7r0WcmR2y0QkPX3d81udQ3x7Kx8JF-KGcITsW-U8fOXDlaotm6uHUlANxIo35rhmJyBasTG54vya0Ff_uXDH4ei4KT80EZzE1RVAB65YJ39ZUJxoplVYT95_07EeHTcwY4E-h9BLWFyTEnCz9fj3WfcHHODXn38Y73qUz3GG1b6Gco9B0rdp0pEPVOORKP-hBbGrQHjMCR1Lf9UgpcnFmXpfmoho_Cp0O0kcJA4IvJbj4DogLNigHJ5BK3jnxiCmlU2X9Ov0ihqiTi08JCW-Ly5txcpPiEmlyjmqQ3RvRCTaR5AlNbN9Oft4Bp32ZiZX1kA21u3hwPQckooo4vsumxO7a6nekC2o9n_cD1O-3ovwyBgdKp_QwQd48-jY9dLyjEh09sm5wgwT-uImzrr09Tmb8eW_AHctrfKqzz2dXNUupD-4Zqodu30BbYJT09hdo6-HOYq5JPw4jbcQroFuV2z7sTJaUO2YKvI1tKNiqSo6I_x2LiwSclUkwt0LHwFRkqFbnsntDb5_isGtrBA8F41iQnI3BBw4PaAZkQbHIx28ez18oUwjDIPeqofyIuNhiILIE1Fc2uGPM1tIcBUqeufgJpygQ6WeU1k1G9x1AAeasngUFEHO8AYCTOQeKrf6i0lgh0kecPE-Xh7r13ehCxq1N_Q3f_tm97tKdt8657U7Lawy6XpipFAurxAwhsgd-wfskclxi3DokpDoNq5QvrCrBgm8hut5ypP0J05kt02X9z8ZbcSRGTXvXDjHi0ChieCxxI1e0tNiJyipZn-42_ehXF5iai4OfqcMcsTX5Q5NI_98siQqbv2zWD2PjmGmz4GTgvsBqUAUQxJ-zrm3STz4t1zsgz4AjLcBO3-6QZg3QD7cVUSmJM4RY9I6FlIhgDQTMbc1fsG2UgGFXpZm3XPX7en9uvx4ACuFWkTaYKWfGvASTA1e1cPA8VAUUc4a2nenTPXdh65S9k4nKtKtGE5i2tmyrIk3Uk5YYlyegWJHmwYI1_ANO_RvKYMn0pKw3S37ye3dv4qutSZgF9tcz24yHI48D9vjs2vy-UqKNnHri4u2AaIg97O5GtxdC8Xn5mBT--OPCi9jdXknXFCay8vewspZaqTfnKCKfkQQ27S-CGiYsXyHTvbnmA1Eq3B8yWKCZNivlhezwI_lWxjMz9EkG5Aa2AJIaDIZbttG9AdtGUDUQA_h2e_xiDtffSJ3Fk3jFc2IP7kWUSBjGI2IRmyAUfzP0oSvkI4NieCqiasjM4Vv1KNrM2swK9PG-UbhPR1PmghTg7e8hCjigH38n4kxLe6A5Zax9KeKYBYaLi3FYzPMxTmfOi3jbosy_BYKwCWSmPf8c5t89ly3CZ9Khn6JB2EdsW4nmYuz2MdBAKw2fcRKeWKAGs4tBQtJyS1o0wVIfZ3t_5te8Sc03GIkocTEfjluK5d4KWKNKdRUM1M3Jm-DBCumKBt1CQvJL4UvKaeNKh7CgliuhDFy3EKV9IJ4-9W8iQ11rbC1EM5tDr5zp155YFZuJ4QRyRjFd1carGWhYY8b1enBaWxMuHk4WryYqzXoSuuGTtPLWwtHY9E8NR1XI0cPeWpcIVRqn2XVEefGw8Dkai3J4t03MQ166EVKMsHtEre4isfRAvMjdbLnBORYUKqCZO1Q3dElqW2RohnmgjOgI0lZfYge5LXKGO5hjCMDLL0dT545TKFZNcYlwmgF-x3TwQN4mpxWxJxWeWhgX5Qhe4u4MXNKYS9U1T4usNjSvZFk_wmc4fS5UiVA1zjQrEi__lhDd_zz_ULVVlZxozUllld-nMzIC04-rpe7FtxntPk_VgkrBBpNuDHgHqJmc7y3vtDcSv9Qny74FipaYwdZPm4vOC4idULYH5cWo4JAY4Zq5GN293bVf8-piQo91EbyUO2mFm0H-LCSufuFizli-v6wL-yzaoz1VFGWMSGpiWiqayYYo3R_W1X5nQnDvEt7ggAoVDmnGoHfPUXe4Kz81tUCGiHscsL51oxoXAHMLw5pkUwkRIN0kZb3r-6pvOZjOGcxqg6-HX7Lonv6J3oA9FByWgt6V1_YsgNB8sBlSNBwALdSQ7IM9OkKiM1a2bOSIHq56cUGOgJHg4fjo9eEhSyr59yItgFvt7nvI2i_tSldrRinyNWe379ENj4_BuPTzRb1b8foV4qjnqdLKccVB0zB7BFNqh7oMKa5jgP4craWiGYyaXbbs_E8B90dGl_P1R4gMJ9TEG9Bc0NKRSk-e98Gn6kFuY6I_L8ZrUx-2x3jQeGcJcKzrMSlb0YR5BnyRwGpTV8HtmNpXjs-0XzLj59eR0lHlw3L4E4gXTg3KA_ZRG--0IExKThKzfm-ekZLliy_eRRgtSwYel5D_TI-YHFD3VTh76CYV7g_mKhZr6gbZVqwE_5FV0rRij4eRjbNtF9jnF6lhoPPdQpYMssDk4OpzbvO-bOh6wSFBcn2wyLnVDlgT1SjEkH-xidg9VFvPRI1jSI4gnIwOXKwcnru1MokvGcXghMy-5PZDO99Q1MtCv_Rxxpxgq5PyUhMlPb2ZBZaOZiuDFlX1cAt_l0fU6W7DxlQ61QteUg3cdcu26PcAw0CNfe5g3BNgm1LwDvb0Lfp_EEWuclw4rJR7f6Uhj--qE-DxLjX4nKljB0ZUjLBYHUMW1CKP4iLmuetp3ZGFWGNlzlQEgER8dJsYMWXnWlEOYUBtuDAtr9CzNAQWkfTkemCZRPYi7WOFRrDJN5LfMwk2dLygwEsArVwPuigfb-ozyxIb8MJo9isC_ehKvUMpTGHVJTLf_v_R2vBTDer7lsk4QK93gXWMp-az6-DXDhdfHKDoctheubydQXUBLRMNK4_KEvbUEpAoKrboWNL2ydEGUsNDot1JBbo6FC-aQwmsecOWKFaqbvOrMCqCbyM36I2LcmdG-esVRf_PJF_pNdhNQTDGbF3A-aqiULtWj58fxDoDjlZTfwIecYFbVEPNwnTV_sF7xzuUVtbRx__xxS__Et5zU--epTlNxryyytNr_zwyVe_loyxPQ6BhP6Kcf3Tlp8xhEO4vLS-U3JnQ6zB6mZxjwOzcLLFqQvBg7rAM2kIzPX8F6QMMQnc7VrODPmnzYOGJ0mYox-HQbZyE7KwqLNRmRSLl7HkHAStaqgpLQkjR2Zj2hVQ-5siDRtXOit-iijoonuJs8AYWrIzcpFxdrh1jewkYVXcNLq_TPIs2jnSivhshhOjQstnG4kFNTFV5SM4A2qEZLv06U4bHV6pjgfe-NSDnKFHHKXmvKkFoadsvglFh__qXzUlFd_zwfyz3ZFr3fkiy7y0"></details><p>相比于2.0.x，把显焓 hs 抽象成了一个类 sensibleEnthalpy。</p><p>reactingFoam:</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">autoPtr&lt;combustionModels::psiCombustionModel&gt; reaction</span><br><span class="line">(</span><br><span class="line">    combustionModels::psiCombustionModel::New(mesh)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">psiReactionThermo&amp; thermo = reaction-&gt;thermo();</span><br><span class="line">thermo.validate(args.executable(), &quot;h&quot;, &quot;e&quot;);</span><br><span class="line"></span><br><span class="line">basicMultiComponentMixture&amp; composition = thermo.composition();</span><br><span class="line">PtrList&lt;volScalarField&gt;&amp; Y = composition.Y();</span><br></pre></td></tr></table></figure><p>CASE/constant/thermophysicalProperties:</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">thermoType</span><br><span class="line">&#123;</span><br><span class="line">    type            hePsiThermo;</span><br><span class="line">    mixture         reactingMixture;</span><br><span class="line">    transport       sutherland;</span><br><span class="line">    thermo          janaf;</span><br><span class="line">    energy          sensibleEnthalpy;</span><br><span class="line">    equationOfState perfectGas;</span><br><span class="line">    specie          specie;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="of-4x"><a class="markdownIt-Anchor" href="#of-4x"></a> OF-4.x</h1><details><summary>OF-4.x UML</summary><img src="http://www.plantuml.com/plantuml/svg/bLHBReCm5Dpx53v0aWCWb4MhgAhKA5M3rBK3fhW2czf6QfJsxWNyuTacYxBYpPiPlmy6bIrH2gkUbeogWbnQUaFwsjEArhWXgg7Lkv3L2rCw8A5VXA0Ktz04sI3_sMvnJsLDI_r4L8RFCsuLIo8t-Dw85zmOV19EwgAXiXCPFdmDH3F1J_LP4-si02MF6DOKASeL6oi-SDsGjh_YtMxlMiaoFMjnXes9wodIv2PhBS6Xfj2xRidPz-ZZm8Dn-gGzUJDJzd38YzwO3bFK4buLad3L2wdZfb96s9VRw8KeLXw7LhD7qVM2KwwFx5iFabhUVOAfPSwRrLeSEWU9c_SBOEFJhHs1Lb6prRH3lmimubM3VA7PSNJt6vIKb9hn3rSIl1dhZ2Z-JxcHD2rqUcB_kOXWf1csBy0w8EGW3vpDytogM3dTBYAlOCd11mOG8mU0qTJjm2gd6IShgPhlX-__A2hQhd1dVu3OyW1Y_pcA1H8Vsp-C2ptxRPwRuB4gnErnAvzeGmjtYU5u4uU4_P2CpoLpaDhWT2dUn5g-HZq3n5ZvC7ORpVu0"></details><p>reactingFoam:</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">autoPtr&lt;combustionModels::psiCombustionModel&gt; reaction</span><br><span class="line">(</span><br><span class="line">    combustionModels::psiCombustionModel::New(mesh)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">psiReactionThermo&amp; thermo = reaction-&gt;thermo();</span><br><span class="line">thermo.validate(args.executable(), &quot;h&quot;, &quot;e&quot;);</span><br><span class="line"></span><br><span class="line">basicMultiComponentMixture&amp; composition = thermo.composition();</span><br><span class="line">PtrList&lt;volScalarField&gt;&amp; Y = composition.Y();</span><br></pre></td></tr></table></figure><p>CASE/constant/thermophysicalProperties:</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">thermoType</span><br><span class="line">&#123;</span><br><span class="line">    type            hePsiThermo;</span><br><span class="line">    mixture         reactingMixture;</span><br><span class="line">    transport       sutherland;</span><br><span class="line">    thermo          janaf;</span><br><span class="line">    energy          sensibleEnthalpy;</span><br><span class="line">    equationOfState perfectGas;</span><br><span class="line">    specie          specie;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者:</span> <span class="post-copyright-info"><a href="mailto:undefined" rel="external nofollow noopener noreferrer" target="_blank">Yan Zhang</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接:</span> <span class="post-copyright-info"><a href="https://openfoam.top/thermodynamicLIB/">https://openfoam.top/thermodynamicLIB/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明:</span> <span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a target="_blank" rel="external nofollow noopener noreferrer" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://openfoam.top">OpenFOAM 成长之路</a>！</span></div></div><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/thermophysicalModels/">thermophysicalModels</a><a class="post-meta__tags" href="/tags/RTS/">RTS</a></div><div class="post-qr-code"><div class="post-qr-code-item"><img class="post-qr-code__img" src="/album/wechatPay.jpg"><div class="post-qr-code__desc">您的肯定会给我更大动力~</div></div></div><div class="social-share pull-right" data-disabled="tencent,douban,qzone,diandian,facebook,twitter,google"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js@1.0.16/dist/css/share.min.css"><script src="https://cdn.jsdelivr.net/npm/social-share.js@1.0.16/dist/js/social-share.min.js"></script><nav id="pagination"><div class="prev-post pull-left"><a href="/qtcreator/"><i class="fa fa-chevron-left"></i><span>使用 qtcreator 对 OpenFOAM 代码 debug</span></a></div><div class="next-post pull-right"><a href="/T_calculate/"><span>OpenFOAM 如何从焓得到温度</span><i class="fa fa-chevron-right"></i></a></div></nav><div id="gitalk-container"></div><script>var gitalk=new Gitalk({clientID:"9dfad189aeefc4c2dde2",clientSecret:"69b4d95e0c4be2508135adae20b05bf6f298f386",repo:"zhangyantju.github.io",owner:"ZhangYanTJU",admin:"ZhangYanTJU",id:md5(decodeURI(location.pathname)),language:"zh-CN"});gitalk.render("gitalk-container")</script></div></div><footer><div class="layout" id="footer"><div class="copyright">&copy;2018 - 2024 By Yan Zhang</div><div class="framework-info"><span>驱动 -</span> <a target="_blank" rel="external nofollow noopener noreferrer" href="http://hexo.io"><span>Hexo</span></a><span class="footer-separator">|</span><span>主题 -</span> <a target="_blank" rel="external nofollow noopener noreferrer" href="https://github.com/Molunerfinn/hexo-theme-melody"><span>Melody</span></a></div></div></footer><i class="fa fa-arrow-up" id="go-up" aria-hidden="true"></i><script src="https://cdn.jsdelivr.net/npm/animejs@latest/anime.min.js"></script><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-animate@latest/velocity.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-ui-pack@latest/velocity.ui.min.js"></script><script src="/js/utils.js?version=1.9.1"></script><script src="/js/fancybox.js?version=1.9.1"></script><script src="/js/sidebar.js?version=1.9.1"></script><script src="/js/copy.js?version=1.9.1"></script><script src="/js/fireworks.js?version=1.9.1"></script><script src="/js/transition.js?version=1.9.1"></script><script src="/js/scroll.js?version=1.9.1"></script><script src="/js/head.js?version=1.9.1"></script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@latest/dist/katex.min.css"><script src="https://cdn.jsdelivr.net/npm/katex-copytex@latest/dist/katex-copytex.min.js"></script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex-copytex@latest/dist/katex-copytex.min.css"><script src="/js/katex.js"></script><script src="/js/search/local-search.js"></script><script>/Android|webOS|iPhone|iPod|iPad|BlackBerry/i.test(navigator.userAgent)&&($("#nav").addClass("is-mobile"),$("footer").addClass("is-mobile"),$("#top-container").addClass("is-mobile"))</script><div class="search-dialog" id="local-search"><div class="search-dialog__title" id="local-search-title">本地搜索</div><div id="local-input-panel"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章"></div></div></div><hr><div id="local-search-results"><div id="local-hits"></div><div id="local-stats"><div class="local-search-stats__hr" id="hr"><span>由</span> <a target="_blank" rel="external nofollow noopener noreferrer" href="https://github.com/wzpan/hexo-generator-search" style="color:#49b1f5">hexo-generator-search</a> <span>提供支持</span></div></div></div><span class="search-close-button"><i class="fa fa-times"></i></span></div><div class="search-mask"></div></body></html>
$(function(){var n=0;function e(e){var i;try{i=$(e)}catch(t){i=$(decodeURI(e))}i.velocity("stop").velocity("scroll",{duration:500,easing:"easeInOutQuart"})}$(".toc-child").hide(),$(window).scroll(throttle(function(t){var e,i,o,a,s,c=$(this).scrollTop();isMobile()||(a=c,o=$("#content-outer").height(),e=a/((e=$(window).height())<o?o-e:$(document).height()-e),o=100<(a=Math.round(100*e))?100:a<=0?0:a,$(".progress-num").text(o),$(".sidebar-toc__progress-bar").velocity("stop").velocity({width:o+"%"},{duration:100,easing:"easeInOutQuart"}),i=c,0!==$(".toc-link").length&&(a=$("#post-content").find("h1,h2,h3,h4,h5,h6"),s="",a.each(function(){var t=$(this);i>t.offset().top-25&&(s="#"+$(this).attr("id"))}),""===s&&($(".toc-link").removeClass("active"),$(".toc-child").hide()),a=GLOBAL_CONFIG.hexoVersion[0],5<=parseInt(a)&&(s=encodeURI(s)),a=$(".toc-link.active"),s)&&a.attr("href")!==s&&(o=s,window.history.replaceState&&o!==window.location.hash&&window.history.replaceState(void 0,void 0,o),$(".toc-link").removeClass("active"),(a=$('.toc-link[href="'+s+'"]')).addClass("active"),(a=(o=0<(o=a.parents(".toc-child")).length?o.last():a).closest(".toc-item").find(".toc-child")).is(":visible")||a.velocity("stop").velocity("transition.fadeIn",{duration:500,easing:"easeInQuart"}),o.closest(".toc-item").siblings(".toc-item").find(".toc-child").hide())),e=n<c,56<(n=c)?(e?$("#page-header").hasClass("visible")?$("#page-header").removeClass("visible"):console.log():$("#page-header").hasClass("visible")?console.log():$("#page-header").addClass("visible"),$("#page-header").addClass("fixed"),"0"===$("#go-up").css("opacity")&&$("#go-up").velocity("stop").velocity({translateX:-30,rotateZ:360,opacity:1},{easing:"easeOutQuart",duration:200})):(0===c&&$("#page-header").removeClass("fixed").removeClass("visible"),$("#go-up").velocity("stop").velocity({translateX:0,rotateZ:180,opacity:0},{easing:"linear",duration:200}))},50,100)),$("#go-up").on("click",function(){$("body").velocity("stop").velocity("scroll",{duration:500,easing:"easeOutQuart"})}),$("#post-content").find("h1,h2,h3,h4,h5,h6").on("click",function(t){e("#"+$(this).attr("id"))}),$(".toc-link").on("click",function(t){t.preventDefault(),e($(this).attr("href"))})});